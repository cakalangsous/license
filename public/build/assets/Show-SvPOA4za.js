import{u as z,r as w,o as i,b as D,d,e as n,f as u,h as P,g as e,l as f,t as s,n as b,i as c,m as p,F as $,j as C,p as A}from"./app-CXYNX7l5.js";import{r as B,u as T,d as V,v as F,_ as U}from"./AdminLayout-BzX5vIWh.js";import{_ as g}from"./Card-B-peCzvN.js";import{_ as S}from"./Button-D7awOZ5r.js";import{_ as E}from"./Modal-MPsd-BTy.js";import{r as I}from"./ArrowLeftIcon-Bt2tPfv5.js";import{a as O}from"./UserGroupIcon-B_Y3lvxt.js";import"./TrashIcon-DePSIVFn.js";import"./DemoBanner-B-KdNamD.js";import"./XMarkIcon-CPBrcqh9.js";import"./TagIcon-C8r8ihxU.js";import"./index-CSEUMRIG.js";import"./keyboard-CcDRV2PE.js";const R={class:"space-y-6"},q={href:"/admin/licenses",class:"inline-flex items-center gap-2 text-secondary-600 hover:text-primary"},M={class:"grid grid-cols-1 lg:grid-cols-3 gap-6"},G={class:"flex items-center gap-2"},H={class:"space-y-4"},J={class:"grid grid-cols-2 gap-4"},K={class:"text-sm bg-secondary-100 dark:bg-secondary-800 px-2 py-1 rounded"},Q={class:"font-medium"},W={class:"font-medium capitalize"},X={class:"font-medium"},Y={class:"font-medium"},Z={class:"font-medium"},ee={class:"font-medium"},te={key:0,class:"pt-4 border-t border-secondary-200 dark:border-secondary-700"},se={class:"text-secondary-700 dark:text-secondary-300"},ae={class:"space-y-4"},le={class:"text-center py-4"},oe={class:"text-4xl font-bold text-primary"},ne={class:"text-sm text-secondary-500"},de={class:"space-y-2 text-sm"},ie={class:"flex justify-between"},re={class:"font-medium text-green-600"},ce={class:"flex justify-between"},ue={class:"font-medium text-blue-600"},me={class:"pt-2 border-t border-secondary-200 dark:border-secondary-700 flex justify-between"},xe={class:"font-medium"},ye={class:"flex justify-between"},fe={class:"font-medium text-secondary-500"},be={class:"flex justify-between"},ve={class:"font-medium text-red-600"},pe={class:"flex items-center gap-2"},ge={key:0,class:"divide-y divide-secondary-200 dark:divide-secondary-700"},ke={class:"flex items-center gap-4"},_e={class:"font-medium"},he={class:"flex items-center gap-2 text-sm text-secondary-500"},we={key:0,class:"text-blue-600"},De={class:"flex items-center gap-2"},$e={key:0,class:"flex gap-1"},Ce=["onClick"],Ae=["onClick"],Be={key:1,class:"py-8 text-center text-secondary-500"},Se={class:"flex items-center gap-2"},Ne={class:"overflow-x-auto"},je={class:"w-full text-sm"},Le={class:"py-2 px-4"},ze={class:"py-2 px-4 capitalize"},Pe={class:"py-2 px-4"},Te={class:"py-2 px-4"},Ve={class:"py-2 px-4 text-secondary-500"},We={__name:"Show",props:{title:{type:String,default:"License Details"},license:{type:Object,required:!0},stats:{type:Object,default:()=>({})}},setup(a){const k=z(),m=w(!1),x=w(null),_=r=>{const t={active:"bg-green-100 text-green-800 dark:bg-green-900/30 dark:text-green-400",suspended:"bg-yellow-100 text-yellow-800 dark:bg-yellow-900/30 dark:text-yellow-400",revoked:"bg-red-100 text-red-800 dark:bg-red-900/30 dark:text-red-400",expired:"bg-gray-100 text-gray-800 dark:bg-gray-900/30 dark:text-gray-400",deactivated:"bg-gray-100 text-gray-800 dark:bg-gray-900/30 dark:text-gray-400",blocked:"bg-red-100 text-red-800 dark:bg-red-900/30 dark:text-red-400"};return t[r]||t.expired},v=r=>r?new Date(r).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"}):"N/A",N=r=>{x.value=r,m.value=!0},j=()=>{x.value&&A.post(`/admin/activations/${x.value.id}/deactivate`,{},{onSuccess:()=>{k.success("Activation deactivated"),m.value=!1,x.value=null}})},L=r=>{confirm("Block this domain from future activations?")&&A.post(`/admin/activations/${r.id}/block`,{},{onSuccess:()=>k.success("Domain blocked")})};return(r,t)=>(i(),D(U,{title:a.title},{default:d(()=>{var h;return[n(u(P),{title:a.title},null,8,["title"]),e("div",R,[e("div",null,[e("a",q,[n(u(I),{class:"w-4 h-4"}),t[2]||(t[2]=f(" Back to Licenses ",-1))])]),e("div",M,[n(g,{class:"lg:col-span-2"},{header:d(()=>[e("div",G,[n(u(O),{class:"w-5 h-5 text-primary"}),t[3]||(t[3]=e("span",{class:"font-semibold"},"License Information",-1))])]),default:d(()=>{var l;return[e("div",H,[e("div",J,[e("div",null,[t[4]||(t[4]=e("label",{class:"block text-sm text-secondary-500"},"Purchase Code",-1)),e("code",K,s(a.license.purchase_code),1)]),e("div",null,[t[5]||(t[5]=e("label",{class:"block text-sm text-secondary-500"},"Status",-1)),e("span",{class:b(["px-2 py-1 rounded-full text-xs font-medium capitalize",_(a.license.status)])},s(a.license.status),3)]),e("div",null,[t[6]||(t[6]=e("label",{class:"block text-sm text-secondary-500"},"Product",-1)),e("p",Q,s((l=a.license.product)==null?void 0:l.name),1)]),e("div",null,[t[7]||(t[7]=e("label",{class:"block text-sm text-secondary-500"},"License Type",-1)),e("p",W,s(a.license.license_type),1)]),e("div",null,[t[8]||(t[8]=e("label",{class:"block text-sm text-secondary-500"},"Buyer Email",-1)),e("p",X,s(a.license.buyer_email),1)]),e("div",null,[t[9]||(t[9]=e("label",{class:"block text-sm text-secondary-500"},"Buyer Name",-1)),e("p",Y,s(a.license.buyer_name||"N/A"),1)]),e("div",null,[t[10]||(t[10]=e("label",{class:"block text-sm text-secondary-500"},"Purchased At",-1)),e("p",Z,s(v(a.license.purchased_at)),1)]),e("div",null,[t[11]||(t[11]=e("label",{class:"block text-sm text-secondary-500"},"Support Until",-1)),e("p",ee,s(v(a.license.supported_until)),1)])]),a.license.notes?(i(),c("div",te,[t[12]||(t[12]=e("label",{class:"block text-sm text-secondary-500"},"Notes",-1)),e("p",se,s(a.license.notes),1)])):p("",!0)])]}),_:1}),n(g,null,{header:d(()=>[...t[13]||(t[13]=[e("span",{class:"font-semibold"},"Usage Stats",-1)])]),default:d(()=>{var l,o;return[e("div",ae,[e("div",le,[e("p",oe,s(a.stats.production_activations||0),1),e("p",ne," of "+s(a.stats.domain_limit||1)+" production domains ",1)]),e("div",de,[e("div",ie,[t[14]||(t[14]=e("span",{class:"text-secondary-500"},"Production",-1)),e("span",re,s(a.stats.production_activations||0),1)]),e("div",ce,[t[15]||(t[15]=e("span",{class:"text-secondary-500"},"Local (Dev)",-1)),e("span",ue,s(a.stats.local_activations||0),1)]),e("div",me,[t[16]||(t[16]=e("span",{class:"text-secondary-500"},"Total Active",-1)),e("span",xe,s(a.stats.total_activations||0),1)]),e("div",ye,[t[17]||(t[17]=e("span",{class:"text-secondary-500"},"Deactivated",-1)),e("span",fe,s(((l=a.license.activations)==null?void 0:l.filter(y=>y.status==="deactivated").length)||0),1)]),e("div",be,[t[18]||(t[18]=e("span",{class:"text-secondary-500"},"Blocked",-1)),e("span",ve,s(((o=a.license.activations)==null?void 0:o.filter(y=>y.status==="blocked").length)||0),1)])])])]}),_:1})]),n(g,null,{header:d(()=>[e("div",pe,[n(u(B),{class:"w-5 h-5 text-primary"}),t[19]||(t[19]=e("span",{class:"font-semibold"},"Domain Activations",-1))])]),default:d(()=>{var l;return[(l=a.license.activations)!=null&&l.length?(i(),c("div",ge,[(i(!0),c($,null,C(a.license.activations,o=>(i(),c("div",{key:o.id,class:"py-4 flex items-center justify-between"},[e("div",ke,[e("div",{class:b(["p-2 rounded-lg",o.is_local?"bg-blue-100 dark:bg-blue-900/30":"bg-secondary-100 dark:bg-secondary-800"])},[n(u(B),{class:b(["w-5 h-5",o.is_local?"text-blue-600":"text-secondary-600"])},null,8,["class"])],2),e("div",null,[e("p",_e,s(o.domain),1),e("div",he,[o.is_local?(i(),c("span",we,"Local Dev")):p("",!0),e("span",null,s(v(o.activated_at)),1)])])]),e("div",De,[e("span",{class:b(["px-2 py-1 rounded-full text-xs font-medium capitalize",_(o.status)])},s(o.status),3),o.status==="active"?(i(),c("div",$e,[e("button",{onClick:y=>N(o),class:"p-1.5 rounded hover:bg-secondary-100 dark:hover:bg-secondary-700 text-secondary-600",title:"Deactivate"},[n(u(T),{class:"w-5 h-5"})],8,Ce),e("button",{onClick:y=>L(o),class:"p-1.5 rounded hover:bg-red-100 dark:hover:bg-red-900/30 text-danger",title:"Block"},[n(u(V),{class:"w-5 h-5"})],8,Ae)])):p("",!0)])]))),128))])):(i(),c("div",Be," No activations yet "))]}),_:1}),(h=a.license.verification_logs)!=null&&h.length?(i(),D(g,{key:0},{header:d(()=>[e("div",Se,[n(u(F),{class:"w-5 h-5 text-primary"}),t[20]||(t[20]=e("span",{class:"font-semibold"},"Recent Verification Logs",-1))])]),default:d(()=>[e("div",Ne,[e("table",je,[t[21]||(t[21]=e("thead",null,[e("tr",{class:"border-b border-secondary-200 dark:border-secondary-700"},[e("th",{class:"text-left py-2 px-4"},"Date"),e("th",{class:"text-left py-2 px-4"},"Action"),e("th",{class:"text-left py-2 px-4"},"Domain"),e("th",{class:"text-left py-2 px-4"},"Result"),e("th",{class:"text-left py-2 px-4"},"IP")])],-1)),e("tbody",null,[(i(!0),c($,null,C(a.license.verification_logs,l=>(i(),c("tr",{key:l.id,class:"border-b border-secondary-100 dark:border-secondary-800"},[e("td",Le,s(v(l.created_at)),1),e("td",ze,s(l.action),1),e("td",Pe,s(l.domain||"N/A"),1),e("td",Te,[e("span",{class:b(["px-2 py-0.5 rounded text-xs",l.success?"bg-green-100 text-green-800 dark:bg-green-900/30 dark:text-green-400":"bg-red-100 text-red-800 dark:bg-red-900/30 dark:text-red-400"])},s(l.success?"Success":"Failed"),3)]),e("td",Ve,s(l.ip_address),1)]))),128))])])])]),_:1})):p("",!0)]),n(E,{show:m.value,title:"Deactivate Domain",onClose:t[1]||(t[1]=l=>m.value=!1)},{footer:d(()=>[n(S,{variant:"outline-secondary",onClick:t[0]||(t[0]=l=>m.value=!1),class:"mr-2"},{default:d(()=>[...t[24]||(t[24]=[f("Cancel",-1)])]),_:1}),n(S,{variant:"warning",onClick:j},{default:d(()=>[...t[25]||(t[25]=[f("Deactivate",-1)])]),_:1})]),default:d(()=>{var l;return[e("p",null,[t[22]||(t[22]=f(" Are you sure you want to deactivate ",-1)),e("strong",null,s((l=x.value)==null?void 0:l.domain),1),t[23]||(t[23]=f("? ",-1))])]}),_:1},8,["show"])]}),_:1},8,["title"]))}};export{We as default};
