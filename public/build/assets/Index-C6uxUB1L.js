import{u as I,r as $,a as q,o as V,b as S,d as l,e as o,f as p,h as B,g as m,l as f,k as U,m as z,t as j,p as F}from"./app-CXYNX7l5.js";import{_ as M}from"./AdminLayout-BzX5vIWh.js";import{_ as x}from"./Card-B-peCzvN.js";import{_ as v}from"./Button-D7awOZ5r.js";import{_ as G}from"./DataTable-CRkcl87X.js";import{_ as L}from"./FormInput-hNOoRqIu.js";import{_ as H}from"./FormSelect-CVaVm0qW.js";import{_ as J}from"./Modal-MPsd-BTy.js";import{q as g,a as P}from"./index-CSEUMRIG.js";import"./UserGroupIcon-B_Y3lvxt.js";import"./ArrowLeftIcon-Bt2tPfv5.js";import"./TrashIcon-DePSIVFn.js";import"./DemoBanner-B-KdNamD.js";import"./XMarkIcon-CPBrcqh9.js";import"./TagIcon-C8r8ihxU.js";import"./keyboard-CcDRV2PE.js";const a=e=>({url:a.url(e),method:"get"});a.definition={methods:["get","head"],url:"/admin/permissions/data"};a.url=e=>a.definition.url+g(e);a.get=e=>({url:a.url(e),method:"get"});a.head=e=>({url:a.url(e),method:"head"});const u=e=>({url:u.url(e),method:"get"});u.definition={methods:["get","head"],url:"/admin/permissions"};u.url=e=>u.definition.url+g(e);u.get=e=>({url:u.url(e),method:"get"});u.head=e=>({url:u.url(e),method:"head"});const c=e=>({url:c.url(e),method:"post"});c.definition={methods:["post"],url:"/admin/permissions"};c.url=e=>c.definition.url+g(e);c.post=e=>({url:c.url(e),method:"post"});const d=(e,s)=>({url:d.url(e,s),method:"put"});d.definition={methods:["put","patch"],url:"/admin/permissions/{permission}"};d.url=(e,s)=>{(typeof e=="string"||typeof e=="number")&&(e={permission:e}),Array.isArray(e)&&(e={permission:e[0]}),e=P(e);const r={permission:e.permission};return d.definition.url.replace("{permission}",r.permission.toString()).replace(/\/+$/,"")+g(s)};d.put=(e,s)=>({url:d.url(e,s),method:"put"});d.patch=(e,s)=>({url:d.url(e,s),method:"patch"});const b=(e,s)=>({url:b.url(e,s),method:"delete"});b.definition={methods:["delete"],url:"/admin/permissions/{permission}"};b.url=(e,s)=>{(typeof e=="string"||typeof e=="number")&&(e={permission:e}),typeof e=="object"&&!Array.isArray(e)&&"id"in e&&(e={permission:e.id}),Array.isArray(e)&&(e={permission:e[0]}),e=P(e);const r={permission:typeof e.permission=="object"?e.permission.id:e.permission};return b.definition.url.replace("{permission}",r.permission.toString()).replace(/\/+$/,"")+g(s)};b.delete=(e,s)=>({url:b.url(e,s),method:"delete"});const C={data:Object.assign(a,a),index:Object.assign(u,u),store:Object.assign(c,c),update:Object.assign(d,d),destroy:Object.assign(b,b)},K={class:"grid grid-cols-1 lg:grid-cols-12 gap-6"},Q={class:"lg:col-span-8"},R={class:"flex gap-2"},W={class:"lg:col-span-4"},X={class:"space-y-4"},Y={class:"flex justify-end gap-2"},be={__name:"Index",props:{title:{type:String,default:"Permissions"},paginatedPermissions:{type:Object,default:()=>({})},tables:{type:Array,default:()=>[]}},setup(e){const s=I(),r=$(!1),k=$(null),i=q({name:"",table_name:""}),A=()=>{r.value=!1,k.value=null,i.reset(),i.clearErrors()},N=()=>{r.value?i.put(C.update.url({permission:k.value}),{onSuccess:()=>{s.success("Permission updated successfully"),A()}}):i.post(C.store.url(),{onSuccess:()=>{s.success("Permission created successfully"),A()}})},D=y=>{r.value=!0,k.value=y.id,i.name=y.name,i.table_name=y.table_name;const t=document.getElementById("permission-form");t&&t.scrollIntoView({behavior:"smooth"})},_=$(!1),h=$(null),O=y=>{h.value=y,_.value=!0},T=()=>{h.value&&F.delete(C.destroy.url({permission:h.value.id}),{onSuccess:()=>{s.success("Permission deleted successfully"),_.value=!1,h.value=null}})},E=[{key:"name",label:"Name",sortable:!0},{key:"table_name",label:"Table",sortable:!0},{key:"guard_name",label:"Guard",sortable:!0},{key:"action",label:"Action",sortable:!1,searchable:!1}];return(y,t)=>(V(),S(M,{title:e.title},{default:l(()=>[o(p(B),{title:e.title},null,8,["title"]),m("div",K,[m("div",Q,[o(x,{title:`${e.title} List`},{default:l(()=>[o(G,{"paginated-data":e.paginatedPermissions,columns:E},{"cell-action":l(({row:n})=>[m("div",R,[o(v,{size:"sm",variant:"outline-primary",onClick:w=>D(n)},{default:l(()=>[...t[4]||(t[4]=[f(" Edit ",-1)])]),_:1},8,["onClick"]),o(v,{size:"sm",variant:"danger",onClick:w=>O(n)},{default:l(()=>[...t[5]||(t[5]=[f(" Delete ",-1)])]),_:1},8,["onClick"])])]),_:1},8,["paginated-data"])]),_:1},8,["title"])]),m("div",W,[o(x,{title:r.value?`Edit ${e.title}`:`Add ${e.title}`},{default:l(()=>[m("form",{onSubmit:U(N,["prevent"]),id:"permission-form"},[m("div",X,[o(L,{modelValue:p(i).name,"onUpdate:modelValue":t[0]||(t[0]=n=>p(i).name=n),label:"Name",placeholder:"Permission Name",required:"",error:p(i).errors.name},null,8,["modelValue","error"]),o(H,{modelValue:p(i).table_name,"onUpdate:modelValue":t[1]||(t[1]=n=>p(i).table_name=n),label:"Table Name",options:e.tables,placeholder:"Select Table",required:"",error:p(i).errors.table_name},null,8,["modelValue","options","error"]),m("div",Y,[r.value?(V(),S(v,{key:0,type:"button",variant:"outline-secondary",onClick:A},{default:l(()=>[...t[6]||(t[6]=[f(" Cancel ",-1)])]),_:1})):z("",!0),o(v,{type:"submit",loading:p(i).processing},{default:l(()=>[f(j(r.value?"Update":"Save"),1)]),_:1},8,["loading"])])])],32)]),_:1},8,["title"])])]),o(J,{show:_.value,title:"Delete Permission",onClose:t[3]||(t[3]=n=>_.value=!1)},{footer:l(()=>[o(v,{variant:"outline-secondary",onClick:t[2]||(t[2]=n=>_.value=!1),class:"mr-2"},{default:l(()=>[...t[9]||(t[9]=[f("Cancel",-1)])]),_:1}),o(v,{variant:"danger",onClick:T},{default:l(()=>[...t[10]||(t[10]=[f("Delete",-1)])]),_:1})]),default:l(()=>{var n;return[m("p",null,[t[7]||(t[7]=f(" Are you sure you want to delete permission ",-1)),m("strong",null,j((n=h.value)==null?void 0:n.name),1),t[8]||(t[8]=f("? This action cannot be undone. ",-1))])]}),_:1},8,["show"])]),_:1},8,["title"]))}};export{be as default};
