import{u as q,a as B,r as $,o as x,b as A,d as r,e as o,f,h as U,g as d,k as F,l as y,t as S,m as I,p as M}from"./app-CXYNX7l5.js";import{k as E,_ as L}from"./AdminLayout-BzX5vIWh.js";import{_ as j}from"./Card-B-peCzvN.js";import{_ as k}from"./Button-D7awOZ5r.js";import{_ as P}from"./DataTable-CRkcl87X.js";import{_ as z}from"./FormInput-hNOoRqIu.js";import{_ as G}from"./Modal-MPsd-BTy.js";import{q as g,a as w}from"./index-CSEUMRIG.js";import{r as H}from"./TrashIcon-DePSIVFn.js";import"./UserGroupIcon-B_Y3lvxt.js";import"./ArrowLeftIcon-Bt2tPfv5.js";import"./DemoBanner-B-KdNamD.js";import"./XMarkIcon-CPBrcqh9.js";import"./TagIcon-C8r8ihxU.js";import"./keyboard-CcDRV2PE.js";const s=e=>({url:s.url(e),method:"get"});s.definition={methods:["get","head"],url:"/admin/roles/data"};s.url=e=>s.definition.url+g(e);s.get=e=>({url:s.url(e),method:"get"});s.head=e=>({url:s.url(e),method:"head"});const a=e=>({url:a.url(e),method:"get"});a.definition={methods:["get","head"],url:"/admin/roles"};a.url=e=>a.definition.url+g(e);a.get=e=>({url:a.url(e),method:"get"});a.head=e=>({url:a.url(e),method:"head"});const m=e=>({url:m.url(e),method:"post"});m.definition={methods:["post"],url:"/admin/roles"};m.url=e=>m.definition.url+g(e);m.post=e=>({url:m.url(e),method:"post"});const n=(e,t)=>({url:n.url(e,t),method:"put"});n.definition={methods:["put","patch"],url:"/admin/roles/{role}"};n.url=(e,t)=>{(typeof e=="string"||typeof e=="number")&&(e={role:e}),Array.isArray(e)&&(e={role:e[0]}),e=w(e);const v={role:e.role};return n.definition.url.replace("{role}",v.role.toString()).replace(/\/+$/,"")+g(t)};n.put=(e,t)=>({url:n.url(e,t),method:"put"});n.patch=(e,t)=>({url:n.url(e,t),method:"patch"});const c=(e,t)=>({url:c.url(e,t),method:"delete"});c.definition={methods:["delete"],url:"/admin/roles/{role}"};c.url=(e,t)=>{(typeof e=="string"||typeof e=="number")&&(e={role:e}),typeof e=="object"&&!Array.isArray(e)&&"id"in e&&(e={role:e.id}),Array.isArray(e)&&(e={role:e[0]}),e=w(e);const v={role:typeof e.role=="object"?e.role.id:e.role};return c.definition.url.replace("{role}",v.role.toString()).replace(/\/+$/,"")+g(t)};c.delete=(e,t)=>({url:c.url(e,t),method:"delete"});const C={data:Object.assign(s,s),index:Object.assign(a,a),store:Object.assign(m,m),update:Object.assign(n,n),destroy:Object.assign(c,c)},J={class:"grid grid-cols-1 lg:grid-cols-3 gap-6"},K={class:"flex items-center gap-2"},Q=["onClick"],W=["onClick"],X={class:"flex items-center gap-2"},pe={__name:"Index",props:{title:{type:String,default:"Roles"},paginatedRoles:{type:Object,default:()=>({})}},setup(e){const t=q(),v=[{key:"name",label:"Name",sortable:!0},{key:"action",label:"Action",sortable:!1,searchable:!1}],u=B({name:""}),p=$(null),R=()=>{u.reset(),p.value=null},N=()=>{p.value?u.put(C.update.url({role:p.value}),{preserveScroll:!0,onSuccess:()=>{t.success("Role updated successfully"),R()}}):u.post(C.store.url(),{preserveScroll:!0,onSuccess:()=>{t.success("Role created successfully"),R()}})},V=_=>{p.value=_.id,u.name=_.name},h=$(!1),b=$(null),D=_=>{b.value=_,h.value=!0},O=()=>{b.value&&M.delete(C.destroy.url({role:b.value.id}),{onSuccess:()=>{t.success("Role deleted successfully"),h.value=!1,b.value=null}})};return(_,l)=>(x(),A(L,{title:e.title},{default:r(()=>[o(f(U),{title:e.title},null,8,["title"]),d("div",J,[o(j,{title:"Roles List",class:"lg:col-span-2"},{default:r(()=>[o(P,{"paginated-data":e.paginatedRoles,columns:v},{"cell-action":r(({row:i})=>[d("div",K,[d("button",{onClick:T=>V(i),class:"p-1.5 rounded hover:bg-secondary-100 dark:hover:bg-secondary-700 text-primary"},[o(f(E),{class:"w-5 h-5"})],8,Q),d("button",{onClick:T=>D(i),class:"p-1.5 rounded hover:bg-red-100 dark:hover:bg-red-900/30 text-danger"},[o(f(H),{class:"w-5 h-5"})],8,W)])]),_:1},8,["paginated-data"])]),_:1}),o(j,{title:p.value?"Edit Role":"Add Role"},{default:r(()=>[d("form",{onSubmit:F(N,["prevent"]),class:"space-y-4"},[o(z,{modelValue:f(u).name,"onUpdate:modelValue":l[0]||(l[0]=i=>f(u).name=i),label:"Role Name",placeholder:"Role Name *",error:f(u).errors.name,required:""},null,8,["modelValue","error"]),d("div",X,[o(k,{type:"submit",loading:f(u).processing},{default:r(()=>[y(S(p.value?"Update":"Submit"),1)]),_:1},8,["loading"]),p.value?(x(),A(k,{key:0,type:"button",variant:"outline-secondary",onClick:R},{default:r(()=>[...l[3]||(l[3]=[y(" Cancel ",-1)])]),_:1})):I("",!0)])],32)]),_:1},8,["title"])]),o(G,{show:h.value,title:"Delete Role",onClose:l[2]||(l[2]=i=>h.value=!1)},{footer:r(()=>[o(k,{variant:"outline-secondary",onClick:l[1]||(l[1]=i=>h.value=!1),class:"mr-2"},{default:r(()=>[...l[6]||(l[6]=[y("Cancel",-1)])]),_:1}),o(k,{variant:"danger",onClick:O},{default:r(()=>[...l[7]||(l[7]=[y("Delete",-1)])]),_:1})]),default:r(()=>{var i;return[d("p",null,[l[4]||(l[4]=y(" Are you sure you want to delete role ",-1)),d("strong",null,S((i=b.value)==null?void 0:i.name),1),l[5]||(l[5]=y("? This action cannot be undone. ",-1))])]}),_:1},8,["show"])]),_:1},8,["title"]))}};export{pe as default};
