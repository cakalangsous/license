import{u as L,r as g,o as i,b as k,d as s,e as r,f as c,h as S,g as o,t as d,i as v,n as V,m as p,l as _,p as N}from"./app-CXYNX7l5.js";import{r as R,a as I,b as M,c as j,d as z,_ as E}from"./AdminLayout-BzX5vIWh.js";import{_ as O}from"./Card-B-peCzvN.js";import{_ as y}from"./Button-D7awOZ5r.js";import{_ as P}from"./DataTable-CRkcl87X.js";import{_ as U}from"./Modal-MPsd-BTy.js";import{r as K}from"./TrashIcon-DePSIVFn.js";import"./UserGroupIcon-B_Y3lvxt.js";import"./ArrowLeftIcon-Bt2tPfv5.js";import"./DemoBanner-B-KdNamD.js";import"./XMarkIcon-CPBrcqh9.js";import"./TagIcon-C8r8ihxU.js";import"./index-CSEUMRIG.js";import"./keyboard-CcDRV2PE.js";const q={class:"font-medium"},F={key:0,class:"text-xs bg-secondary-100 dark:bg-secondary-800 px-2 py-1 rounded"},G={key:1,class:"text-xs text-secondary-500"},H={class:"flex items-center gap-1.5"},J={class:"text-sm"},Q={class:"text-sm text-secondary-600"},W={class:"flex items-center gap-1"},X=["onClick"],Y=["onClick"],Z=["onClick"],ee=["onClick"],be={__name:"Index",props:{title:{type:String,default:"Activations"},activations:{type:Object,default:()=>({})}},setup(f){const h=L(),x=[{key:"domain",label:"Domain",sortable:!0},{key:"ip_address",label:"IP",sortable:!0},{key:"license.product.name",label:"Product",sortable:!1},{key:"license.purchase_code",label:"License",sortable:!1},{key:"env",label:"Environment",sortable:!0},{key:"last_verified_at",label:"Last Verified",sortable:!0},{key:"status",label:"Status",sortable:!0},{key:"action",label:"Action",sortable:!1,searchable:!1}],u=g(!1),l=g(null),n=g(""),m=(a,t)=>{l.value=a,n.value=t,u.value=!0},$=()=>{switch(n.value){case"deactivate":return"Deactivate Domain";case"block":return"Block Activation";case"delete":return"Delete Activation";case"reactivate":return"Reactivate Domain";default:return"Confirm Action"}},w=()=>{var t;const a=((t=l.value)==null?void 0:t.domain)||"this domain";switch(n.value){case"deactivate":return`Are you sure you want to deactivate ${a}? It can be reactivated later.`;case"block":return`Are you sure you want to BLOCK ${a}? This will prevent future activations from this domain.`;case"delete":return`Are you sure you want to completely delete the activation record for ${a}?`;case"reactivate":return`Reactivate access for ${a}?`;default:return"Are you sure?"}},A=()=>{switch(n.value){case"deactivate":return"Deactivate";case"block":return"Block";case"delete":return"Delete";case"reactivate":return"Reactivate";default:return"Confirm"}},C=()=>{switch(n.value){case"reactivate":return"success";case"deactivate":return"warning";case"block":return"danger";case"delete":return"danger";default:return"primary"}},D=()=>{if(!l.value||!n.value)return;const a={deactivate:`/admin/activations/${l.value.id}/deactivate`,block:`/admin/activations/${l.value.id}/block`,delete:`/admin/activations/${l.value.id}`,reactivate:`/admin/activations/${l.value.id}/reactivate`},t=n.value==="delete"?"delete":"post";N[t](a[n.value],n.value==="delete"?{}:{},{onSuccess:()=>{h.success("Action completed successfully"),u.value=!1,l.value=null,n.value=""}})},B=a=>{const t={active:"bg-green-100 text-green-800 dark:bg-green-900/30 dark:text-green-400",inactive:"bg-gray-100 text-gray-800 dark:bg-gray-900/30 dark:text-gray-400",blocked:"bg-red-100 text-red-800 dark:bg-red-900/30 dark:text-red-400"};return t[a]||t.inactive},T=a=>a?new Date(a).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"}):"Never";return(a,t)=>(i(),k(E,{title:f.title},{default:s(()=>[r(c(S),{title:f.title},null,8,["title"]),r(O,null,{header:s(()=>[...t[2]||(t[2]=[o("div",{class:"flex items-center justify-between w-full"},[o("span",{class:"font-semibold"},"Domain Activations")],-1)])]),default:s(()=>[r(P,{"paginated-data":f.activations,columns:x,"show-actions":!1},{"cell-domain":s(({row:e})=>[o("div",q,d(e.domain),1)]),"cell-license.purchase_code":s(({row:e})=>[e.license?(i(),v("code",F,d(e.license.purchase_code.substring(0,8))+"... ",1)):(i(),v("span",G,"Unknown"))]),"cell-env":s(({row:e})=>[o("div",H,[e.is_local?(i(),k(c(I),{key:1,class:"w-4 h-4 text-green-600"})):(i(),k(c(R),{key:0,class:"w-4 h-4 text-primary"})),o("span",J,d(e.is_local?"Local":"Live"),1)])]),"cell-last_verified_at":s(({row:e})=>[o("span",Q,d(T(e.last_verified_at)),1)]),"cell-status":s(({row:e})=>[o("span",{class:V(["px-2 py-1 rounded-full text-xs font-medium capitalize",B(e.status)])},d(e.status),3)]),"cell-action":s(({row:e})=>[o("div",W,[e.status==="active"?(i(),v("button",{key:0,onClick:b=>m(e,"deactivate"),class:"p-1.5 rounded hover:bg-yellow-100 dark:hover:bg-yellow-900/30 text-yellow-600",title:"Deactivate"},[r(c(M),{class:"w-5 h-5"})],8,X)):p("",!0),e.status==="deactivated"?(i(),v("button",{key:1,onClick:b=>m(e,"reactivate"),class:"p-1.5 rounded hover:bg-green-100 dark:hover:bg-green-900/30 text-green-600",title:"Reactivate"},[r(c(j),{class:"w-5 h-5"})],8,Y)):p("",!0),e.status!=="blocked"?(i(),v("button",{key:2,onClick:b=>m(e,"block"),class:"p-1.5 rounded hover:bg-red-100 dark:hover:bg-red-900/30 text-danger",title:"Block Domain"},[r(c(z),{class:"w-5 h-5"})],8,Z)):p("",!0),o("button",{onClick:b=>m(e,"delete"),class:"p-1.5 rounded hover:bg-red-100 dark:hover:bg-red-900/30 text-danger",title:"Delete"},[r(c(K),{class:"w-5 h-5"})],8,ee)])]),_:1},8,["paginated-data"])]),_:1}),r(U,{show:u.value,title:$(),onClose:t[1]||(t[1]=e=>u.value=!1)},{footer:s(()=>[r(y,{variant:"outline-secondary",onClick:t[0]||(t[0]=e=>u.value=!1),class:"mr-2"},{default:s(()=>[...t[3]||(t[3]=[_(" Cancel ",-1)])]),_:1}),r(y,{variant:C(),onClick:D},{default:s(()=>[_(d(A()),1)]),_:1},8,["variant"])]),default:s(()=>[o("p",null,d(w()),1)]),_:1},8,["show","title"])]),_:1},8,["title"]))}};export{be as default};
