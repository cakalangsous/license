import{u as V,a as h,r as b,o as A,b as P,d as a,e as l,f as o,h as U,g as s,l as n,t as f,k as M,p as R}from"./app-B4kXJm1R.js";import{j,k as F,_ as N}from"./AdminLayout-Dl7j7Lml.js";import{_ as T}from"./Card-CWZ0FrNR.js";import{_ as p}from"./Button-BorMZ65S.js";import{_ as E}from"./DataTable-CQkKoL2v.js";import{_ as I}from"./FormInput-DnkblmfP.js";import{_ as O}from"./FormTextarea-W1qJgIc9.js";import{_}from"./Modal-D0MHrs78.js";import{r as q}from"./TrashIcon-CSwwSb2h.js";import"./UserGroupIcon-CyxjldZw.js";import"./ArrowLeftIcon-C4pIvMX3.js";import"./DemoBanner-5gPpdzaD.js";import"./XMarkIcon-BknwjWvY.js";import"./TagIcon-D0dlpqbY.js";import"./index-CSEUMRIG.js";import"./keyboard-BDssWLgB.js";const z={class:"flex items-center justify-between w-full"},L={class:"flex items-center gap-2"},W={class:"font-mono text-sm bg-red-50 dark:bg-red-900/20 px-2 py-1 rounded text-red-600 dark:text-red-400"},G={class:"text-sm text-secondary-600 dark:text-secondary-400"},H={class:"flex items-center gap-2"},J=["onClick"],K=["onClick"],Q={class:"bg-secondary-100 dark:bg-secondary-800 px-2 py-1 rounded"},fe={__name:"Index",props:{title:{type:String,default:"Blacklisted Domains"},domains:{type:Object,default:()=>({})}},setup(v){const k=V(),x=[{key:"pattern",label:"Pattern",sortable:!0},{key:"reason",label:"Reason",sortable:!1},{key:"created_at",label:"Added",sortable:!0},{key:"action",label:"Action",sortable:!1,searchable:!1}],r=h({pattern:"",reason:""}),u=b(null),i=b(!1),m=b(!1),c=b(null),g=()=>{r.reset(),u.value=null},w=()=>{g(),i.value=!0},$=d=>{u.value=d.id,r.pattern=d.pattern,r.reason=d.reason||"",i.value=!0},y=()=>{u.value?r.put(`/admin/blacklisted-domains/${u.value}`,{preserveScroll:!0,onSuccess:()=>{k.success("Blacklist entry updated successfully"),i.value=!1,g()}}):r.post("/admin/blacklisted-domains",{preserveScroll:!0,onSuccess:()=>{k.success("Domain added to blacklist"),i.value=!1,g()}})},C=d=>{c.value=d,m.value=!0},D=()=>{c.value&&R.delete(`/admin/blacklisted-domains/${c.value.id}`,{onSuccess:()=>{k.success("Domain removed from blacklist"),m.value=!1,c.value=null}})},B=d=>d?new Date(d).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"}):"-";return(d,e)=>(A(),P(N,{title:v.title},{default:a(()=>[l(o(U),{title:v.title},null,8,["title"]),l(T,null,{header:a(()=>[s("div",z,[s("div",L,[l(o(j),{class:"w-5 h-5 text-red-500"}),e[6]||(e[6]=s("span",{class:"font-semibold"},"Blacklisted Domains",-1))]),l(p,{onClick:w},{default:a(()=>[...e[7]||(e[7]=[n("Add Pattern",-1)])]),_:1})])]),default:a(()=>[e[8]||(e[8]=s("div",{class:"mb-4 p-3 bg-amber-50 dark:bg-amber-900/20 rounded-lg border border-amber-200 dark:border-amber-800"},[s("p",{class:"text-sm text-amber-700 dark:text-amber-300"},[s("strong",null,"Patterns:"),n(" Use wildcards like "),s("code",{class:"bg-amber-100 dark:bg-amber-900 px-1 rounded"},"*.nulled.*"),n(" or "),s("code",{class:"bg-amber-100 dark:bg-amber-900 px-1 rounded"},"nulled.to")])],-1)),l(E,{"paginated-data":v.domains,columns:x,"show-actions":!1},{"cell-pattern":a(({row:t})=>[s("span",W,f(t.pattern),1)]),"cell-reason":a(({row:t})=>[s("span",G,f(t.reason||"-"),1)]),"cell-created_at":a(({row:t})=>[n(f(B(t.created_at)),1)]),"cell-action":a(({row:t})=>[s("div",H,[s("button",{onClick:S=>$(t),class:"p-1.5 rounded hover:bg-secondary-100 dark:hover:bg-secondary-700 text-primary"},[l(o(F),{class:"w-5 h-5"})],8,J),s("button",{onClick:S=>C(t),class:"p-1.5 rounded hover:bg-red-100 dark:hover:bg-red-900/30 text-danger"},[l(o(q),{class:"w-5 h-5"})],8,K)])]),_:1},8,["paginated-data"])]),_:1}),l(_,{show:i.value,title:u.value?"Edit Blacklist Entry":"Add Blacklist Pattern",onClose:e[3]||(e[3]=t=>i.value=!1)},{footer:a(()=>[l(p,{variant:"outline-secondary",onClick:e[2]||(e[2]=t=>i.value=!1),class:"mr-2"},{default:a(()=>[...e[9]||(e[9]=[n("Cancel",-1)])]),_:1}),l(p,{onClick:y,loading:o(r).processing},{default:a(()=>[n(f(u.value?"Update":"Add to Blacklist"),1)]),_:1},8,["loading"])]),default:a(()=>[s("form",{onSubmit:M(y,["prevent"]),class:"space-y-4"},[l(I,{modelValue:o(r).pattern,"onUpdate:modelValue":e[0]||(e[0]=t=>o(r).pattern=t),label:"Domain Pattern",error:o(r).errors.pattern,placeholder:"*.nulled.*, warez.com, *.cracked.*",required:""},null,8,["modelValue","error"]),l(O,{modelValue:o(r).reason,"onUpdate:modelValue":e[1]||(e[1]=t=>o(r).reason=t),label:"Reason (Optional)",error:o(r).errors.reason,rows:2,placeholder:"Why is this domain blacklisted?"},null,8,["modelValue","error"])],32)]),_:1},8,["show","title"]),l(_,{show:m.value,title:"Remove from Blacklist",onClose:e[5]||(e[5]=t=>m.value=!1)},{footer:a(()=>[l(p,{variant:"outline-secondary",onClick:e[4]||(e[4]=t=>m.value=!1),class:"mr-2"},{default:a(()=>[...e[12]||(e[12]=[n("Cancel",-1)])]),_:1}),l(p,{variant:"danger",onClick:D},{default:a(()=>[...e[13]||(e[13]=[n("Remove",-1)])]),_:1})]),default:a(()=>{var t;return[s("p",null,[e[10]||(e[10]=n(" Are you sure you want to remove ",-1)),s("code",Q,f((t=c.value)==null?void 0:t.pattern),1),e[11]||(e[11]=n(" from the blacklist? ",-1))])]}),_:1},8,["show"])]),_:1},8,["title"]))}};export{fe as default};
