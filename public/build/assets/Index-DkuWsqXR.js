import{u as $,q as N,E as z,r as p,o as i,b,d as s,e as r,f as m,h as A,l as n,t as g,g as a,n as B,m as h,T as I,i as _,G as V,p as E}from"./app-B4kXJm1R.js";import{p as R,_ as U}from"./AdminLayout-Dl7j7Lml.js";import{_ as j}from"./Card-CWZ0FrNR.js";import{_ as x}from"./LinkButton-BsjLcF6P.js";import{_ as O}from"./Button-BorMZ65S.js";import{_ as P}from"./DataTable-CQkKoL2v.js";import{c as y}from"./index-BITrN0ZQ.js";import{_ as S}from"./_plugin-vue_export-helper-DlAUqK2U.js";import"./UserGroupIcon-CyxjldZw.js";import"./ArrowLeftIcon-C4pIvMX3.js";import"./TrashIcon-CSwwSb2h.js";import"./DemoBanner-5gPpdzaD.js";import"./XMarkIcon-BknwjWvY.js";import"./TagIcon-D0dlpqbY.js";import"./index-CSEUMRIG.js";import"./keyboard-BDssWLgB.js";const M={class:"flex gap-2"},W={key:0,class:"fixed inset-0 z-50 flex items-center justify-center"},q={class:"relative bg-white dark:bg-gray-800 rounded-2xl shadow-2xl max-w-md w-full mx-4 p-6 transform transition-all"},F={class:"mx-auto w-16 h-16 bg-red-100 dark:bg-red-900/30 rounded-full flex items-center justify-center mb-4"},G={class:"text-center text-gray-500 dark:text-gray-400 mb-6"},L={class:"font-semibold text-gray-700 dark:text-gray-300"},H={class:"flex gap-3"},J=["disabled"],K={key:0},Q={key:1},X={__name:"Index",props:{title:{type:String,default:"Crud"},paginatedCruds:{type:Object,default:()=>({})}},setup(d){const f=$(),k=N();z(()=>{var l;(l=k.props.flash)!=null&&l.success&&f.success(k.props.flash.success)});const C=[{key:"model_name",label:"Model Name",sortable:!0},{key:"table_name",label:"Table Name",sortable:!0},{key:"builder_options",label:"Type",sortable:!0},{key:"action",label:"Action",sortable:!1,searchable:!1}],c=p(!1),o=p(null),u=p(!1),D=l=>{o.value=l,c.value=!0},w=()=>{o.value&&(u.value=!0,E.delete(y.destroy.url(o.value.id),{onSuccess:()=>{f.success("CRUD deleted successfully!"),c.value=!1,o.value=null,u.value=!1},onError:()=>{f.error("Failed to delete CRUD"),u.value=!1}}))},v=()=>{c.value=!1,o.value=null},T=l=>({generate_crud:"Web CRUD",generate_api:"API Only",generate_crud_api:"Web + API"})[l]||l;return(l,e)=>(i(),b(U,{title:d.title},{default:s(()=>[r(m(A),{title:d.title},null,8,["title"]),r(j,{title:`${d.title} List`},{"header-actions":s(()=>[r(x,{href:m(y).create.url(),variant:"primary"},{default:s(()=>[n(" Add "+g(d.title),1)]),_:1},8,["href"])]),default:s(()=>[r(P,{"paginated-data":d.paginatedCruds,columns:C},{"cell-builder_options":s(({row:t})=>[a("span",{class:B({"px-2 py-1 text-xs font-medium rounded-full":!0,"bg-blue-100 text-blue-800 dark:bg-blue-900 dark:text-blue-300":t.builder_options==="generate_crud","bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-300":t.builder_options==="generate_api","bg-purple-100 text-purple-800 dark:bg-purple-900 dark:text-purple-300":t.builder_options==="generate_crud_api"})},g(T(t.builder_options)),3)]),"cell-action":s(({row:t})=>[a("div",M,[t.has_web_route?(i(),b(x,{key:0,href:t.index_url,size:"sm",variant:"outline-info"},{default:s(()=>[...e[0]||(e[0]=[n(" Visit ",-1)])]),_:1},8,["href"])):h("",!0),r(x,{href:m(y).edit.url(t.id),size:"sm",variant:"outline-primary"},{default:s(()=>[...e[1]||(e[1]=[n(" Edit ",-1)])]),_:1},8,["href"]),r(O,{size:"sm",variant:"danger",onClick:Y=>D(t)},{default:s(()=>[...e[2]||(e[2]=[n(" Delete ",-1)])]),_:1},8,["onClick"])])]),_:1},8,["paginated-data"])]),_:1},8,["title"]),(i(),b(I,{to:"body"},[r(V,{name:"modal"},{default:s(()=>{var t;return[c.value?(i(),_("div",W,[a("div",{class:"absolute inset-0 bg-black/50 backdrop-blur-sm",onClick:v}),a("div",q,[a("div",F,[r(m(R),{class:"w-8 h-8 text-red-600 dark:text-red-400"})]),e[5]||(e[5]=a("h3",{class:"text-xl font-semibold text-center text-gray-900 dark:text-white mb-2"}," Delete CRUD? ",-1)),a("p",G,[e[3]||(e[3]=n(" Are you sure you want to delete ",-1)),a("span",L,' "'+g((t=o.value)==null?void 0:t.model_name)+'" ',1),e[4]||(e[4]=n("? This will remove the database entry and all generated files. ",-1))]),a("div",H,[a("button",{onClick:v,class:"flex-1 px-4 py-2.5 text-gray-700 dark:text-gray-300 bg-gray-100 dark:bg-gray-700 hover:bg-gray-200 dark:hover:bg-gray-600 rounded-lg font-medium transition-colors"}," Cancel "),a("button",{onClick:w,disabled:u.value,class:"flex-1 px-4 py-2.5 text-white bg-red-600 hover:bg-red-700 rounded-lg font-medium transition-colors disabled:opacity-50 disabled:cursor-not-allowed"},[u.value?(i(),_("span",K,"Deleting...")):(i(),_("span",Q,"Delete"))],8,J)])])])):h("",!0)]}),_:1})]))]),_:1},8,["title"]))}},be=S(X,[["__scopeId","data-v-0df0d042"]]);export{be as default};
