import{u as A,a as U,r as f,o as D,b as I,d as r,e as s,f as t,h as N,g as o,l as d,t as _,n as T,y as B,z as L,k as F,p as P}from"./app-B4kXJm1R.js";import{k as j,_ as z}from"./AdminLayout-Dl7j7Lml.js";import{_ as E}from"./Card-CWZ0FrNR.js";import{_ as c}from"./Button-BorMZ65S.js";import{_ as q}from"./DataTable-CQkKoL2v.js";import{_ as v}from"./FormInput-DnkblmfP.js";import{_ as x}from"./Modal-D0MHrs78.js";import{r as O}from"./TrashIcon-CSwwSb2h.js";import"./UserGroupIcon-CyxjldZw.js";import"./ArrowLeftIcon-C4pIvMX3.js";import"./DemoBanner-5gPpdzaD.js";import"./XMarkIcon-BknwjWvY.js";import"./TagIcon-D0dlpqbY.js";import"./index-CSEUMRIG.js";import"./keyboard-BDssWLgB.js";const R={class:"flex items-center justify-between w-full"},h={class:"flex items-center gap-2"},G=["onClick"],H=["onClick"],J={class:"flex items-center gap-2"},ue={__name:"Index",props:{title:{type:String,default:"Marketplaces"},marketplaces:{type:Object,default:()=>({})}},setup(k){const b=A(),C=[{key:"name",label:"Name",sortable:!0},{key:"slug",label:"Slug",sortable:!0},{key:"licenses_count",label:"Licenses",sortable:!1},{key:"sales_count",label:"Sales",sortable:!1},{key:"is_active",label:"Status",sortable:!0},{key:"action",label:"Action",sortable:!1,searchable:!1}],a=U({name:"",slug:"",api_token:"",api_base_url:"",is_active:!0}),i=f(null),u=f(!1),p=f(!1),m=f(null),g=()=>{a.reset(),i.value=null},M=()=>{g(),u.value=!0},V=n=>{i.value=n.id,a.name=n.name,a.slug=n.slug,a.api_token="",a.api_base_url=n.api_base_url||"",a.is_active=n.is_active,u.value=!0},y=()=>{i.value?a.put(`/admin/marketplaces/${i.value}`,{preserveScroll:!0,onSuccess:()=>{b.success("Marketplace updated successfully"),u.value=!1,g()}}):a.post("/admin/marketplaces",{preserveScroll:!0,onSuccess:()=>{b.success("Marketplace created successfully"),u.value=!1,g()}})},$=n=>{m.value=n,p.value=!0},w=()=>{m.value&&P.delete(`/admin/marketplaces/${m.value.id}`,{onSuccess:()=>{b.success("Marketplace deleted successfully"),p.value=!1,m.value=null}})};return(n,e)=>(D(),I(z,{title:k.title},{default:r(()=>[s(t(N),{title:k.title},null,8,["title"]),s(E,null,{header:r(()=>[o("div",R,[e[10]||(e[10]=o("span",{class:"font-semibold"},"Marketplaces",-1)),s(c,{onClick:M},{default:r(()=>[...e[9]||(e[9]=[d("Add Marketplace",-1)])]),_:1})])]),default:r(()=>[s(q,{"paginated-data":k.marketplaces,columns:C,"show-actions":!1},{"cell-is_active":r(({row:l})=>[o("span",{class:T(["px-2 py-1 rounded-full text-xs font-medium",l.is_active?"bg-green-100 text-green-800 dark:bg-green-900/30 dark:text-green-400":"bg-gray-100 text-gray-800 dark:bg-gray-900/30 dark:text-gray-400"])},_(l.is_active?"Active":"Inactive"),3)]),"cell-action":r(({row:l})=>[o("div",h,[o("button",{onClick:S=>V(l),class:"p-1.5 rounded hover:bg-secondary-100 dark:hover:bg-secondary-700 text-primary"},[s(t(j),{class:"w-5 h-5"})],8,G),o("button",{onClick:S=>$(l),class:"p-1.5 rounded hover:bg-red-100 dark:hover:bg-red-900/30 text-danger"},[s(t(O),{class:"w-5 h-5"})],8,H)])]),_:1},8,["paginated-data"])]),_:1}),s(x,{show:u.value,title:i.value?"Edit Marketplace":"Add Marketplace",onClose:e[6]||(e[6]=l=>u.value=!1)},{footer:r(()=>[s(c,{variant:"outline-secondary",onClick:e[5]||(e[5]=l=>u.value=!1),class:"mr-2"},{default:r(()=>[...e[12]||(e[12]=[d("Cancel",-1)])]),_:1}),s(c,{onClick:y,loading:t(a).processing},{default:r(()=>[d(_(i.value?"Update":"Create"),1)]),_:1},8,["loading"])]),default:r(()=>[o("form",{onSubmit:F(y,["prevent"]),class:"space-y-4"},[s(v,{modelValue:t(a).name,"onUpdate:modelValue":e[0]||(e[0]=l=>t(a).name=l),label:"Marketplace Name",error:t(a).errors.name,required:""},null,8,["modelValue","error"]),s(v,{modelValue:t(a).slug,"onUpdate:modelValue":e[1]||(e[1]=l=>t(a).slug=l),label:"Slug",error:t(a).errors.slug,placeholder:"Leave empty to auto-generate"},null,8,["modelValue","error"]),s(v,{modelValue:t(a).api_base_url,"onUpdate:modelValue":e[2]||(e[2]=l=>t(a).api_base_url=l),label:"API Base URL",error:t(a).errors.api_base_url,placeholder:"https://api.envato.com"},null,8,["modelValue","error"]),s(v,{modelValue:t(a).api_token,"onUpdate:modelValue":e[3]||(e[3]=l=>t(a).api_token=l),label:"API Token",type:"password",error:t(a).errors.api_token,placeholder:i.value?"Leave empty to keep existing":"Enter API token"},null,8,["modelValue","error","placeholder"]),o("div",J,[B(o("input",{type:"checkbox","onUpdate:modelValue":e[4]||(e[4]=l=>t(a).is_active=l),id:"is_active",class:"rounded border-secondary-300 text-primary focus:ring-primary"},null,512),[[L,t(a).is_active]]),e[11]||(e[11]=o("label",{for:"is_active",class:"text-sm text-secondary-700 dark:text-secondary-300"}," Active ",-1))])],32)]),_:1},8,["show","title"]),s(x,{show:p.value,title:"Delete Marketplace",onClose:e[8]||(e[8]=l=>p.value=!1)},{footer:r(()=>[s(c,{variant:"outline-secondary",onClick:e[7]||(e[7]=l=>p.value=!1),class:"mr-2"},{default:r(()=>[...e[15]||(e[15]=[d("Cancel",-1)])]),_:1}),s(c,{variant:"danger",onClick:w},{default:r(()=>[...e[16]||(e[16]=[d("Delete",-1)])]),_:1})]),default:r(()=>{var l;return[o("p",null,[e[13]||(e[13]=d(" Are you sure you want to delete ",-1)),o("strong",null,_((l=m.value)==null?void 0:l.name),1),e[14]||(e[14]=d("? This action cannot be undone. ",-1))])]}),_:1},8,["show"])]),_:1},8,["title"]))}};export{ue as default};
