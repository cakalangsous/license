import{o as v,i as x,g as a,e as c,f as k,l as $,k as z,m as B,r as w,w as H,c as F,B as se,n as J,t as O,b as U,d as M,b3 as Z,y as ee,K as le,F as W,j as te,z as ie,T as de,u as ue,p as _}from"./app-B4kXJm1R.js";import{k as ce,B as L,_ as me}from"./AdminLayout-Dl7j7Lml.js";import{_ as R}from"./Button-BorMZ65S.js";import{_ as pe}from"./ConfirmationModal-Bn7BmSet.js";import{d as re}from"./vuedraggable.umd-OUDQQnl7.js";import{c as be,e as fe}from"./UserGroupIcon-CyxjldZw.js";import{r as he}from"./ArrowLeftIcon-C4pIvMX3.js";import{r as ve,a as ye}from"./TrashIcon-CSwwSb2h.js";import{_ as oe}from"./_plugin-vue_export-helper-DlAUqK2U.js";import{r as ne}from"./DemoBanner-5gPpdzaD.js";import{_ as ae}from"./Modal-D0MHrs78.js";import{_ as Q}from"./FormInput-DnkblmfP.js";import{_ as Y}from"./FormSelect-BRGdU3AD.js";import{q,a as K}from"./index-CSEUMRIG.js";import"./TagIcon-D0dlpqbY.js";import"./XMarkIcon-BknwjWvY.js";import"./keyboard-BDssWLgB.js";const ge={__name:"SidebarMenuContextMenu",props:{hasParent:{type:Boolean,default:!1}},emits:["edit","delete","add-child","detach"],setup(e,{emit:o}){const r=o;return(s,t)=>(v(),x("div",{class:"absolute right-0 top-full mt-1 z-50 bg-white dark:bg-secondary-800 rounded-lg shadow-lg border border-secondary-200 dark:border-secondary-600 py-1 min-w-[160px]",onClick:t[4]||(t[4]=z(()=>{},["stop"]))},[a("button",{type:"button",class:"w-full flex items-center gap-2 px-4 py-2 text-left text-secondary-700 dark:text-secondary-300 hover:bg-secondary-50 dark:hover:bg-secondary-700 transition-colors",onClick:t[0]||(t[0]=z(l=>r("edit"),["stop"]))},[c(k(ce),{class:"w-4 h-4"}),t[5]||(t[5]=$(" Edit ",-1))]),a("button",{type:"button",class:"w-full flex items-center gap-2 px-4 py-2 text-left text-secondary-700 dark:text-secondary-300 hover:bg-secondary-50 dark:hover:bg-secondary-700 transition-colors",onClick:t[1]||(t[1]=z(l=>r("add-child"),["stop"]))},[c(k(be),{class:"w-4 h-4"}),t[6]||(t[6]=$(" Add child ",-1))]),e.hasParent?(v(),x("button",{key:0,type:"button",class:"w-full flex items-center gap-2 px-4 py-2 text-left text-amber-600 dark:text-amber-400 hover:bg-amber-50 dark:hover:bg-amber-900/20 transition-colors",onClick:t[2]||(t[2]=z(l=>r("detach"),["stop"]))},[c(k(he),{class:"w-4 h-4"}),t[7]||(t[7]=$(" Detach from parent ",-1))])):B("",!0),a("button",{type:"button",class:"w-full flex items-center gap-2 px-4 py-2 text-left text-red-600 hover:bg-red-50 dark:hover:bg-red-900/20 transition-colors",onClick:t[3]||(t[3]=z(l=>r("delete"),["stop"]))},[c(k(ve),{class:"w-4 h-4"}),t[8]||(t[8]=$(" Delete ",-1))])]))}},we=["data-id","data-parent-id"],xe={class:"drag-handle shrink-0 w-8 h-8 flex items-center justify-center bg-primary hover:bg-primary/80 text-white rounded cursor-move transition-colors"},ke={class:"grow"},Me={class:"w-8 h-8 flex items-center justify-center text-primary hover:text-primary/80 hover:bg-primary/10 dark:hover:bg-primary/20 rounded transition-colors"},Ce={__name:"SidebarMenuItem",props:{menu:{type:Object,required:!0},depth:{type:Number,default:0},section:{type:String,required:!0}},emits:["edit","delete","add-child","toggle-active","update-structure"],setup(e,{emit:o}){const r=e,s=o,t=w([...r.menu.all_children||[]]);H(()=>r.menu.all_children,u=>{t.value=[...u||[]]},{deep:!0});const l=w(!1);let p=null;const h=()=>{p&&(clearTimeout(p),p=null),l.value=!0},i=()=>{p=setTimeout(()=>{l.value=!1},200)},f=()=>{s("toggle-active",r.menu)},d=()=>{l.value=!1,s("edit",r.menu)},A=()=>{l.value=!1,s("delete",r.menu)},D=()=>{l.value=!1,s("add-child",r.menu)},y=u=>{if(u.added||u.moved||u.removed){const g=t.value.map((P,b)=>({id:P.id,parent_id:r.menu.id,order:b,section:r.section}));s("update-structure",g)}},n=F(()=>({animation:200,group:"nested-menus",ghostClass:"sortable-ghost",chosenClass:"sortable-chosen",dragClass:"sortable-drag",handle:".drag-handle",fallbackOnBody:!0,swapThreshold:.65,emptyInsertThreshold:10}));return(u,g)=>{const P=se("SidebarMenuItem",!0);return v(),x("div",{class:"menu-item-wrapper","data-id":e.menu.id,"data-parent-id":e.menu.parent_id},[a("div",{class:J(["menu-item flex items-center gap-3 px-4 py-3 border-b border-secondary-100 dark:border-secondary-700 hover:bg-secondary-50 dark:hover:bg-secondary-700/50 transition-colors",{"opacity-50":!e.menu.is_active}]),onDblclick:f},[a("div",xe,[c(k(ne),{class:"w-4 h-4"})]),a("div",ke,[a("span",{class:J(["text-secondary-800 dark:text-white font-medium",{"line-through":!e.menu.is_active}])},O(e.menu.title),3)]),a("div",{class:"relative shrink-0",onMouseenter:h,onMouseleave:i},[a("button",Me,[c(k(fe),{class:"w-5 h-5"})]),l.value?(v(),U(ge,{key:0,"has-parent":!!e.menu.parent_id,onEdit:d,onDelete:A,onAddChild:D,onMouseenter:h,onMouseleave:i},null,8,["has-parent"])):B("",!0)],32)],34),c(k(re),Z({modelValue:t.value,"onUpdate:modelValue":g[5]||(g[5]=b=>t.value=b)},n.value,{"item-key":"id",class:["children-dropzone",{"has-children":t.value.length>0,"empty-zone":t.value.length===0}],onChange:y}),{item:M(({element:b})=>[c(P,{menu:b,depth:e.depth+1,section:e.section,"data-id":b.id,onEdit:g[0]||(g[0]=m=>s("edit",m)),onDelete:g[1]||(g[1]=m=>s("delete",m)),onAddChild:g[2]||(g[2]=m=>s("add-child",m)),onToggleActive:g[3]||(g[3]=m=>s("toggle-active",m)),onUpdateStructure:g[4]||(g[4]=m=>s("update-structure",m))},null,8,["menu","depth","section","data-id"])]),_:1},16,["modelValue","class"])],8,we)}}},Ae=oe(Ce,[["__scopeId","data-v-b3193d5c"]]),$e={__name:"SidebarMenuList",props:{menus:{type:Array,required:!0},section:{type:String,required:!0},depth:{type:Number,default:0},parentId:{type:Number,default:null}},emits:["edit","delete","add-child","toggle-active","update-structure"],setup(e,{emit:o}){const r=e,s=o,t=w([...r.menus]);H(()=>r.menus,h=>{t.value=[...h]},{deep:!0});const l=h=>{if(h.added||h.moved||h.removed){const i=t.value.map((f,d)=>({id:f.id,parent_id:r.parentId,order:d,section:r.section}));s("update-structure",i)}},p=F(()=>({animation:200,group:"nested-menus",ghostClass:"sortable-ghost",chosenClass:"sortable-chosen",dragClass:"sortable-drag",handle:".drag-handle",fallbackOnBody:!0,swapThreshold:.65,emptyInsertThreshold:10}));return(h,i)=>(v(),U(k(re),Z({modelValue:t.value,"onUpdate:modelValue":i[5]||(i[5]=f=>t.value=f)},p.value,{"item-key":"id",class:["menu-list",{"ml-6 pl-3 border-l-2 border-primary-300 dark:border-primary-600":e.depth>0}],onChange:l}),{item:M(({element:f})=>[c(Ae,{menu:f,depth:e.depth,section:e.section,"data-id":f.id,onEdit:i[0]||(i[0]=d=>s("edit",d)),onDelete:i[1]||(i[1]=d=>s("delete",d)),onAddChild:i[2]||(i[2]=d=>s("add-child",d)),onToggleActive:i[3]||(i[3]=d=>s("toggle-active",d)),onUpdateStructure:i[4]||(i[4]=d=>s("update-structure",d))},null,8,["menu","depth","section","data-id"])]),_:1},16,["modelValue","class"]))}},Se=oe($e,[["__scopeId","data-v-ed7184c5"]]),Ie={class:"mb-4"},Ve={class:"relative"},je={class:"absolute inset-y-0 left-0 flex items-center pl-3 pointer-events-none"},Te={class:"grid grid-cols-4 sm:grid-cols-6 md:grid-cols-8 lg:grid-cols-10 gap-2 max-h-[400px] overflow-y-auto p-1"},Ne=["onClick","title"],Oe={class:"mt-1 text-[10px] text-secondary-500 dark:text-secondary-400 truncate w-full text-center"},qe={key:0,class:"flex flex-col items-center justify-center py-8 text-secondary-500"},De={class:"text-sm text-secondary-500 dark:text-secondary-400 mr-auto"},_e={__name:"IconPickerModal",props:{show:Boolean,selectedIcon:String},emits:["close","select"],setup(e,{emit:o}){const r=e,s=o,t=w(""),l=["home","home-modern","bars-3","bars-3-bottom-left","bars-3-bottom-right","bars-3-center-left","bars-4","squares-2x2","squares-plus","view-columns","view-finder-circle","x-mark","x-circle","check","check-circle","chevron-down","chevron-up","chevron-left","chevron-right","chevron-double-down","chevron-double-up","chevron-double-left","chevron-double-right","arrow-down","arrow-up","arrow-left","arrow-right","arrow-long-down","arrow-long-up","arrow-long-left","arrow-long-right","arrow-path","arrow-path-rounded-square","arrows-pointing-in","arrows-pointing-out","arrow-top-right-on-square","arrow-down-tray","arrow-up-tray","arrow-uturn-left","arrow-uturn-right","document","document-text","document-duplicate","document-check","document-plus","document-minus","document-arrow-down","document-arrow-up","document-magnifying-glass","folder","folder-open","folder-plus","folder-minus","folder-arrow-down","clipboard","clipboard-document","clipboard-document-check","clipboard-document-list","paper-clip","newspaper","book-open","bookmark","bookmark-square","book-mark-slash","user","user-plus","user-minus","user-circle","user-group","users","identification","finger-print","hand-raised","hand-thumb-up","hand-thumb-down","chat-bubble-left","chat-bubble-left-right","chat-bubble-bottom-center","chat-bubble-bottom-center-text","chat-bubble-oval-left","chat-bubble-oval-left-ellipsis","envelope","envelope-open","inbox","inbox-arrow-down","inbox-stack","phone","phone-arrow-down-left","phone-arrow-up-right","phone-x-mark","megaphone","speaker-wave","speaker-x-mark","bell","bell-alert","bell-slash","bell-snooze","photo","camera","film","video-camera","video-camera-slash","microphone","musical-note","play","pause","stop","forward","backward","play-circle","pause-circle","play-pause","chart-bar","chart-bar-square","chart-pie","presentation-chart-bar","presentation-chart-line","table-cells","rectangle-stack","circle-stack","server","server-stack","database","cog","cog-6-tooth","cog-8-tooth","wrench","wrench-screwdriver","adjustments-horizontal","adjustments-vertical","funnel","paint-brush","pencil","pencil-square","scissors","trash","archive-box","archive-box-arrow-down","archive-box-x-mark","lock-closed","lock-open","key","shield-check","shield-exclamation","eye","eye-slash","eye-dropper","finger-print","shopping-bag","shopping-cart","credit-card","banknotes","currency-dollar","currency-euro","currency-pound","currency-yen","receipt-percent","receipt-refund","ticket","gift","gift-top","exclamation-circle","exclamation-triangle","information-circle","question-mark-circle","check-badge","no-symbol","minus-circle","plus-circle","plus","minus","map","map-pin","globe-alt","globe-americas","globe-asia-australia","globe-europe-africa","building-library","building-office","building-office-2","building-storefront","home-modern","calendar","calendar-days","clock","stopwatch","computer-desktop","device-phone-mobile","device-tablet","tv","cpu-chip","cube","cube-transparent","command-line","code-bracket","code-bracket-square","wifi","signal","signal-slash","rss","qr-code","link","cursor-arrow-rays","cursor-arrow-ripple","sun","moon","cloud","cloud-arrow-down","cloud-arrow-up","bolt","fire","sparkles","star","heart","lifebuoy","light-bulb","beaker","bug-ant","face-smile","face-frown","magnifying-glass","magnifying-glass-circle","magnifying-glass-plus","magnifying-glass-minus","at-symbol","hashtag","tag","ellipsis-horizontal","ellipsis-vertical","ellipsis-horizontal-circle","bars-arrow-down","bars-arrow-up","list-bullet","numbered-list","queue-list","rectangle-group","swatch","puzzle-piece","power","rocket-launch","academic-cap","trophy","flag","cake","language","printer","paper-airplane","calculator","truck","scale","variable"],p=F(()=>{if(!t.value.trim())return l;const i=t.value.toLowerCase();return l.filter(f=>f.toLowerCase().includes(i))}),h=i=>{s("select",i),s("close")};return H(()=>r.show,i=>{i&&(t.value="")}),(i,f)=>(v(),U(ae,{show:e.show,title:"Select Icon",size:"xl","z-index":"z-[60]",onClose:f[2]||(f[2]=d=>s("close"))},{footer:M(()=>[a("p",De,O(p.value.length)+" icons available ",1),a("button",{type:"button",onClick:f[1]||(f[1]=d=>s("close")),class:"px-4 py-2 text-sm font-medium text-secondary-700 bg-white border border-secondary-300 rounded-lg hover:bg-secondary-50 dark:bg-secondary-800 dark:text-secondary-300 dark:border-secondary-600 dark:hover:bg-secondary-700"}," Cancel ")]),default:M(()=>[a("div",Ie,[a("div",Ve,[a("div",je,[c(L,{name:"magnifying-glass",class:"w-5 h-5 text-secondary-400"})]),ee(a("input",{"onUpdate:modelValue":f[0]||(f[0]=d=>t.value=d),type:"text",placeholder:"Search icons...",class:"block w-full pl-10 pr-4 py-2 border border-secondary-300 rounded-lg bg-white dark:bg-secondary-800 dark:border-secondary-600 text-secondary-900 dark:text-white placeholder-secondary-400 focus:outline-none focus:ring-2 focus:ring-primary-500/20 focus:border-primary-500 transition-colors duration-200"},null,512),[[le,t.value]])])]),a("div",Te,[(v(!0),x(W,null,te(p.value,d=>(v(),x("button",{key:d,type:"button",onClick:A=>h(d),class:J(["flex flex-col items-center justify-center p-3 rounded-lg border-2 transition-all duration-150 hover:bg-primary-50 dark:hover:bg-primary-900/30",e.selectedIcon===d?"border-primary-500 bg-primary-50 dark:bg-primary-900/30":"border-transparent hover:border-primary-300 dark:hover:border-primary-700"]),title:d},[c(L,{name:d,class:"w-6 h-6 text-secondary-700 dark:text-secondary-300"},null,8,["name"]),a("span",Oe,O(d),1)],10,Ne))),128))]),p.value.length===0?(v(),x("div",qe,[c(L,{name:"face-frown",class:"w-12 h-12 mb-2"}),a("p",null,'No icons found matching "'+O(t.value)+'"',1)])):B("",!0)]),_:1},8,["show"]))}},Ee={class:"flex items-center justify-center w-10 h-10 bg-primary-100 dark:bg-primary-900/30 rounded-lg"},ze={class:"flex-1 text-left"},Fe={class:"text-sm font-medium text-secondary-900 dark:text-white"},Ue={class:"flex items-center gap-3"},Be={class:"relative inline-flex items-center cursor-pointer"},Pe={__name:"SidebarMenuFormModal",props:{show:Boolean,menu:Object,parentMenu:Object,allMenus:Array,sections:Array},emits:["close","submit"],setup(e,{emit:o}){const r=e,s=o,t=w({title:"",icon:"database",route_name:"",section:"MAIN NAVIGATION",permission:"",parent_id:null,is_active:!0}),l=w({}),p=w(!1);H(()=>r.show,y=>{var n;y&&(l.value={},p.value=!1,r.menu?t.value={title:r.menu.title||"",icon:r.menu.icon||"database",route_name:r.menu.route_name||"",section:r.menu.section||"MAIN NAVIGATION",permission:r.menu.permission||"",parent_id:r.menu.parent_id||null,is_active:r.menu.is_active??!0}:r.parentMenu?t.value={title:"",icon:"database",route_name:"",section:r.parentMenu.section,permission:"",parent_id:r.parentMenu.id,is_active:!0}:t.value={title:"",icon:"database",route_name:"",section:((n=r.sections)==null?void 0:n[0])||"MAIN NAVIGATION",permission:"",parent_id:null,is_active:!0})});const h=F(()=>r.menu?"Edit Menu":r.parentMenu?`Add Child to "${r.parentMenu.title}"`:"Add New Menu"),i=F(()=>{const y=["MAIN NAVIGATION","OTHER"];return[...new Set([...y,...r.sections||[]])].map(u=>({value:u,label:u}))}),f=F(()=>{const y=[{value:null,label:"None (Root Level)"}];return r.allMenus&&r.allMenus.forEach(n=>{r.menu&&n.id===r.menu.id||y.push({value:n.id,label:`${n.section} > ${n.title}`})}),y}),d=y=>{t.value.icon=y},A=()=>{var y,n;return l.value={},(y=t.value.title)!=null&&y.trim()||(l.value.title="Title is required"),(n=t.value.section)!=null&&n.trim()||(l.value.section="Section is required"),Object.keys(l.value).length===0},D=()=>{A()&&s("submit",{...t.value})};return(y,n)=>(v(),x(W,null,[c(ae,{show:e.show,title:h.value,size:"md",closeable:!p.value,onClose:n[8]||(n[8]=u=>s("close"))},{footer:M(()=>[c(R,{variant:"secondary",onClick:n[7]||(n[7]=u=>s("close"))},{default:M(()=>[...n[14]||(n[14]=[$("Cancel",-1)])]),_:1}),c(R,{variant:"primary",onClick:D},{default:M(()=>[$(O(e.menu?"Update":"Create"),1)]),_:1})]),default:M(()=>[a("form",{onSubmit:z(D,["prevent"]),class:"space-y-4"},[c(Q,{modelValue:t.value.title,"onUpdate:modelValue":n[0]||(n[0]=u=>t.value.title=u),label:"Title",placeholder:"Menu title",error:l.value.title,required:""},null,8,["modelValue","error"]),a("div",null,[n[11]||(n[11]=a("label",{class:"block text-sm font-medium text-secondary-700 dark:text-secondary-300 mb-1"}," Icon ",-1)),a("button",{type:"button",onClick:n[1]||(n[1]=u=>p.value=!0),class:"flex items-center gap-3 w-full px-4 py-2.5 border border-secondary-300 rounded-lg bg-white dark:bg-secondary-800 dark:border-secondary-600 hover:bg-secondary-50 dark:hover:bg-secondary-700 transition-colors"},[a("div",Ee,[c(L,{name:t.value.icon||"database",class:"w-6 h-6 text-primary-600 dark:text-primary-400"},null,8,["name"])]),a("div",ze,[a("p",Fe,O(t.value.icon||"database"),1),n[10]||(n[10]=a("p",{class:"text-xs text-secondary-500 dark:text-secondary-400"}," Click to change icon ",-1))]),c(L,{name:"chevron-right",class:"w-5 h-5 text-secondary-400"})])]),c(Q,{modelValue:t.value.route_name,"onUpdate:modelValue":n[2]||(n[2]=u=>t.value.route_name=u),label:"Route Name",placeholder:"e.g., dashboard, users.index",error:l.value.route_name},null,8,["modelValue","error"]),c(Q,{modelValue:t.value.permission,"onUpdate:modelValue":n[3]||(n[3]=u=>t.value.permission=u),label:"Permission",placeholder:"e.g., users_view",error:l.value.permission},null,8,["modelValue","error"]),e.parentMenu?B("",!0):(v(),U(Y,{key:0,modelValue:t.value.section,"onUpdate:modelValue":n[4]||(n[4]=u=>t.value.section=u),label:"Section",options:i.value,error:l.value.section,required:""},null,8,["modelValue","options","error"])),e.parentMenu?B("",!0):(v(),U(Y,{key:1,modelValue:t.value.parent_id,"onUpdate:modelValue":n[5]||(n[5]=u=>t.value.parent_id=u),label:"Parent Menu",options:f.value,error:l.value.parent_id},null,8,["modelValue","options","error"])),a("div",Ue,[a("label",Be,[ee(a("input",{type:"checkbox","onUpdate:modelValue":n[6]||(n[6]=u=>t.value.is_active=u),class:"sr-only peer"},null,512),[[ie,t.value.is_active]]),n[12]||(n[12]=a("div",{class:"w-11 h-6 bg-secondary-200 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-primary-300 dark:peer-focus:ring-primary-800 rounded-full peer dark:bg-secondary-700 peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-secondary-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all dark:border-secondary-600 peer-checked:bg-primary-600"},null,-1)),n[13]||(n[13]=a("span",{class:"ml-3 text-sm font-medium text-secondary-700 dark:text-secondary-300"}," Active ",-1))])])],32)]),_:1},8,["show","title","closeable"]),(v(),U(de,{to:"body"},[c(_e,{show:p.value,"selected-icon":t.value.icon,onClose:n[9]||(n[9]=u=>p.value=!1),onSelect:d},null,8,["show","selected-icon"])]))],64))}},C=e=>({url:C.url(e),method:"get"});C.definition={methods:["get","head"],url:"/admin/sidebar-menus"};C.url=e=>C.definition.url+q(e);C.get=e=>({url:C.url(e),method:"get"});C.head=e=>({url:C.url(e),method:"head"});const S=e=>({url:S.url(e),method:"post"});S.definition={methods:["post"],url:"/admin/sidebar-menus"};S.url=e=>S.definition.url+q(e);S.post=e=>({url:S.url(e),method:"post"});const I=(e,o)=>({url:I.url(e,o),method:"put"});I.definition={methods:["put"],url:"/admin/sidebar-menus/{sidebarMenu}"};I.url=(e,o)=>{(typeof e=="string"||typeof e=="number")&&(e={sidebarMenu:e}),typeof e=="object"&&!Array.isArray(e)&&"id"in e&&(e={sidebarMenu:e.id}),Array.isArray(e)&&(e={sidebarMenu:e[0]}),e=K(e);const r={sidebarMenu:typeof e.sidebarMenu=="object"?e.sidebarMenu.id:e.sidebarMenu};return I.definition.url.replace("{sidebarMenu}",r.sidebarMenu.toString()).replace(/\/+$/,"")+q(o)};I.put=(e,o)=>({url:I.url(e,o),method:"put"});const V=(e,o)=>({url:V.url(e,o),method:"delete"});V.definition={methods:["delete"],url:"/admin/sidebar-menus/{sidebarMenu}"};V.url=(e,o)=>{(typeof e=="string"||typeof e=="number")&&(e={sidebarMenu:e}),typeof e=="object"&&!Array.isArray(e)&&"id"in e&&(e={sidebarMenu:e.id}),Array.isArray(e)&&(e={sidebarMenu:e[0]}),e=K(e);const r={sidebarMenu:typeof e.sidebarMenu=="object"?e.sidebarMenu.id:e.sidebarMenu};return V.definition.url.replace("{sidebarMenu}",r.sidebarMenu.toString()).replace(/\/+$/,"")+q(o)};V.delete=(e,o)=>({url:V.url(e,o),method:"delete"});const j=e=>({url:j.url(e),method:"post"});j.definition={methods:["post"],url:"/admin/sidebar-menus/reorder"};j.url=e=>j.definition.url+q(e);j.post=e=>({url:j.url(e),method:"post"});const T=(e,o)=>({url:T.url(e,o),method:"post"});T.definition={methods:["post"],url:"/admin/sidebar-menus/{sidebarMenu}/toggle"};T.url=(e,o)=>{(typeof e=="string"||typeof e=="number")&&(e={sidebarMenu:e}),typeof e=="object"&&!Array.isArray(e)&&"id"in e&&(e={sidebarMenu:e.id}),Array.isArray(e)&&(e={sidebarMenu:e[0]}),e=K(e);const r={sidebarMenu:typeof e.sidebarMenu=="object"?e.sidebarMenu.id:e.sidebarMenu};return T.definition.url.replace("{sidebarMenu}",r.sidebarMenu.toString()).replace(/\/+$/,"")+q(o)};T.post=(e,o)=>({url:T.url(e,o),method:"post"});const N=(e,o)=>({url:N.url(e,o),method:"post"});N.definition={methods:["post"],url:"/admin/sidebar-menus/{sidebarMenu}/add-child"};N.url=(e,o)=>{(typeof e=="string"||typeof e=="number")&&(e={sidebarMenu:e}),typeof e=="object"&&!Array.isArray(e)&&"id"in e&&(e={sidebarMenu:e.id}),Array.isArray(e)&&(e={sidebarMenu:e[0]}),e=K(e);const r={sidebarMenu:typeof e.sidebarMenu=="object"?e.sidebarMenu.id:e.sidebarMenu};return N.definition.url.replace("{sidebarMenu}",r.sidebarMenu.toString()).replace(/\/+$/,"")+q(o)};N.post=(e,o)=>({url:N.url(e,o),method:"post"});const E={index:Object.assign(C,C),store:Object.assign(S,S),update:Object.assign(I,I),destroy:Object.assign(V,V),reorder:Object.assign(j,j),toggle:Object.assign(T,T),addChild:Object.assign(N,N)},Le={class:"p-6 max-w-6xl mx-auto"},Ge={class:"mb-6"},Re={class:"space-y-8"},He={class:"px-4 py-3 border-b border-secondary-200 dark:border-secondary-700"},Ke={class:"text-sm font-bold text-secondary-700 dark:text-secondary-300 uppercase tracking-wider"},Qe={key:0,class:"bg-white dark:bg-secondary-800 rounded-lg shadow-sm border border-secondary-200 dark:border-secondary-700 p-12 text-center"},mt=Object.assign({layout:me},{__name:"Index",props:{menusBySection:Object,sections:Array,allMenus:Array},setup(e){const o=ue(),r=w(!1),s=w(null),t=w(null),l=w(!1),p=w(null),h=w(!1),i=()=>{s.value=null,t.value=null,r.value=!0},f=b=>{s.value=b,t.value=null,r.value=!0},d=b=>{s.value=null,t.value=b,r.value=!0},A=()=>{r.value=!1,s.value=null,t.value=null},D=b=>{s.value?_.put(E.update.url({sidebarMenu:s.value.id}),b,{preserveScroll:!0,onSuccess:()=>{o.success("Menu updated successfully"),A()},onError:m=>{o.error("Failed to update menu")}}):t.value?_.post(E.addChild.url({sidebarMenu:t.value.id}),b,{preserveScroll:!0,onSuccess:()=>{o.success("Child menu added successfully"),A()},onError:m=>{o.error("Failed to add child menu")}}):_.post(E.store.url(),b,{preserveScroll:!0,onSuccess:()=>{o.success("Menu created successfully"),A()},onError:m=>{o.error("Failed to create menu")}})},y=b=>{p.value=b,l.value=!0},n=()=>{p.value&&(h.value=!0,_.delete(E.destroy.url({sidebarMenu:p.value.id}),{preserveScroll:!0,onSuccess:()=>{o.success("Menu deleted successfully"),u()},onError:()=>{o.error("Failed to delete menu"),h.value=!1}}))},u=()=>{l.value=!1,p.value=null,h.value=!1},g=b=>{_.post(E.toggle.url({sidebarMenu:b.id}),{},{preserveScroll:!0,onSuccess:()=>{o.success(b.is_active?"Menu deactivated":"Menu activated")},onError:()=>{o.error("Failed to toggle menu status")}})},P=b=>{_.post(E.reorder.url(),{items:b},{preserveScroll:!0,onSuccess:()=>{o.success("Menu order updated")},onError:()=>{o.error("Failed to update menu order")}})};return(b,m)=>{var X;return v(),x("div",Le,[m[4]||(m[4]=a("div",{class:"bg-primary text-white px-4 py-3 rounded-lg mb-6 shadow-md"},[a("div",{class:"font-medium mb-1"},"# Hints:"),a("ul",{class:"text-sm space-y-1 list-disc list-inside"},[a("li",null,"Double click menu to activate or deactivate"),a("li",null,"Drag up/down to reorder menus"),a("li",null," Drag into the indented area below a menu to make it a child "),a("li",null," Drag out of the indented area to the main list to detach ")])],-1)),a("div",Ge,[c(R,{variant:"outline-primary",onClick:i},{default:M(()=>[c(k(ye),{class:"w-4 h-4 mr-2"}),m[0]||(m[0]=$(" Add Menu New ",-1))]),_:1})]),a("div",Re,[(v(!0),x(W,null,te(e.sections,G=>(v(),x("div",{key:G,class:"bg-white py-4 dark:bg-secondary-800 rounded-lg shadow-sm border border-secondary-200 dark:border-secondary-700"},[a("div",He,[a("h2",Ke,O(G),1)]),c(Se,{menus:e.menusBySection[G]||[],section:G,onEdit:f,onDelete:y,onAddChild:d,onToggleActive:g,onUpdateStructure:P},null,8,["menus","section"])]))),128)),!e.sections||e.sections.length===0?(v(),x("div",Qe,[c(k(ne),{class:"w-16 h-16 mx-auto text-secondary-400 mb-4"}),m[2]||(m[2]=a("h3",{class:"text-lg font-medium text-secondary-900 dark:text-white mb-2"}," No menus yet ",-1)),m[3]||(m[3]=a("p",{class:"text-secondary-500 dark:text-secondary-400 mb-4"}," Get started by creating your first menu item. ",-1)),c(R,{variant:"primary",onClick:i},{default:M(()=>[...m[1]||(m[1]=[$(" Create First Menu ",-1)])]),_:1})])):B("",!0)]),c(Pe,{show:r.value,menu:s.value,"parent-menu":t.value,"all-menus":e.allMenus,sections:e.sections,onClose:A,onSubmit:D},null,8,["show","menu","parent-menu","all-menus","sections"]),c(pe,{show:l.value,title:"Delete Menu",message:`Are you sure you want to delete '${(X=p.value)==null?void 0:X.title}'? This action cannot be undone.`,"confirm-text":"Delete","cancel-text":"Cancel",variant:"danger",loading:h.value,onConfirm:n,onCancel:u},null,8,["show","message","loading"])])}}});export{mt as default};
