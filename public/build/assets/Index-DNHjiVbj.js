import{q as B,r as i,a as T,o as u,i as x,e as o,f as r,h as E,d as s,l as p,g as t,m as K,F as A,j as L,t as k,s as M,b as $}from"./app-CXYNX7l5.js";import{e as U,f as j,_ as q,A as P}from"./AdminLayout-BzX5vIWh.js";import{_ as z}from"./Card-B-peCzvN.js";import{_ as g}from"./Button-D7awOZ5r.js";import{_ as I}from"./Modal-MPsd-BTy.js";import{_ as G}from"./ConfirmationModal-PZXMHMYt.js";import{_ as H}from"./FormInput-hNOoRqIu.js";import{a as J,r as O}from"./TrashIcon-DePSIVFn.js";import"./UserGroupIcon-B_Y3lvxt.js";import"./ArrowLeftIcon-Bt2tPfv5.js";import"./DemoBanner-B-KdNamD.js";import"./XMarkIcon-CPBrcqh9.js";import"./TagIcon-C8r8ihxU.js";import"./index-CSEUMRIG.js";import"./keyboard-CcDRV2PE.js";const Q={class:"overflow-x-auto"},R={class:"w-full text-left text-sm text-gray-600 dark:text-gray-300"},W={class:"divide-y divide-gray-200 dark:divide-secondary-600"},X={key:0},Y={class:"px-6 py-4"},Z={class:"px-6 py-4"},ee={class:"px-6 py-4"},te={class:"px-6 py-4 text-right"},oe=["onClick"],se={class:"space-y-4"},ae={class:"space-y-4"},re={class:"relative bg-gray-50 dark:bg-secondary-800 border border-gray-200 dark:border-secondary-700 p-4 rounded-lg font-mono text-sm break-all text-gray-800 dark:text-gray-200 pr-14"},be={__name:"Index",props:{tokens:Array},setup(h){const D=B(),c=i(!1),_=i(!1),y=i(null),m=i(!1),f=i(!1),n=i(null),d=T({name:"",permissions:["*"]}),b=T({}),C=()=>{d.post(P.store.url(),{preserveScroll:!0,onSuccess:()=>{var l;c.value=!1,_.value=!0,y.value=(l=D.props.flash)==null?void 0:l.plainTextToken,d.reset()}})},N=l=>{n.value=l,f.value=!0},V=()=>{n.value&&b.delete(P.destroy.url(n.value.id),{preserveScroll:!0,onSuccess:()=>{f.value=!1,n.value=null}})},F=()=>{f.value=!1,n.value=null},S=()=>{const l=y.value;if(l)if(navigator.clipboard&&window.isSecureContext)navigator.clipboard.writeText(l).then(()=>{m.value=!0,setTimeout(()=>m.value=!1,2e3)});else{const e=document.createElement("textarea");e.value=l,e.style.position="fixed",e.style.left="-9999px",document.body.appendChild(e),e.focus(),e.select();try{document.execCommand("copy"),m.value=!0,setTimeout(()=>m.value=!1,2e3)}catch(v){console.error("Failed to copy token:",v)}document.body.removeChild(e)}},w=()=>{_.value=!1,y.value=null};return(l,e)=>(u(),x(A,null,[o(r(E),{title:"API Tokens"}),o(q,null,{default:s(()=>{var v;return[o(z,{title:"API Tokens"},{"header-actions":s(()=>[o(g,{onClick:e[0]||(e[0]=a=>c.value=!0),size:"sm"},{default:s(()=>[o(r(J),{class:"w-4 h-4 mr-2"}),e[4]||(e[4]=p(" Create Token ",-1))]),_:1})]),default:s(()=>[t("div",Q,[t("table",R,[e[6]||(e[6]=t("thead",{class:"bg-gray-50 dark:bg-secondary-700 text-xs uppercase font-medium text-gray-500 dark:text-gray-400"},[t("tr",null,[t("th",{class:"px-6 py-3"},"Name"),t("th",{class:"px-6 py-3"},"Last Used"),t("th",{class:"px-6 py-3"},"Created"),t("th",{class:"px-6 py-3 text-right"},"Actions")])],-1)),t("tbody",W,[h.tokens.length===0?(u(),x("tr",X,[...e[5]||(e[5]=[t("td",{colspan:"4",class:"px-6 py-4 text-center text-gray-500"}," No API tokens found. ",-1)])])):K("",!0),(u(!0),x(A,null,L(h.tokens,a=>(u(),x("tr",{key:a.id,class:"hover:bg-gray-50 dark:hover:bg-secondary-700"},[t("td",Y,k(a.name),1),t("td",Z,k(a.last_used_at),1),t("td",ee,k(a.created_at),1),t("td",te,[t("button",{onClick:le=>N(a),class:"text-red-600 hover:text-red-900 dark:text-red-400 dark:hover:text-red-300"},[o(r(O),{class:"w-5 h-5"})],8,oe)])]))),128))])])])]),_:1}),o(I,{show:c.value,title:"Create API Token",onClose:e[3]||(e[3]=a=>c.value=!1)},{footer:s(()=>[o(g,{variant:"secondary",onClick:e[2]||(e[2]=a=>c.value=!1),class:"mr-2"},{default:s(()=>[...e[7]||(e[7]=[p("Cancel",-1)])]),_:1}),o(g,{onClick:C,disabled:r(d).processing},{default:s(()=>[...e[8]||(e[8]=[p("Create",-1)])]),_:1},8,["disabled"])]),default:s(()=>[t("div",se,[t("div",null,[o(H,{modelValue:r(d).name,"onUpdate:modelValue":e[1]||(e[1]=a=>r(d).name=a),label:"Token Name",placeholder:"My API Token",error:r(d).errors.name,onKeyup:M(C,["enter"])},null,8,["modelValue","error"])])])]),_:1},8,["show"]),o(I,{show:_.value,title:"API Token Generated",onClose:w},{footer:s(()=>[o(g,{onClick:w},{default:s(()=>[...e[10]||(e[10]=[p("Close",-1)])]),_:1})]),default:s(()=>[t("div",ae,[e[9]||(e[9]=t("p",{class:"text-sm text-gray-600 dark:text-gray-400"}," Please copy your new API token. For your security, it won't be shown again. ",-1)),t("div",re,[p(k(y.value)+" ",1),t("button",{onClick:S,class:"absolute top-1/2 -translate-y-1/2 right-3 p-2 rounded-md text-gray-500 hover:text-gray-700 hover:bg-gray-200 dark:text-gray-400 dark:hover:text-white dark:hover:bg-secondary-700 transition-colors",title:"Copy to clipboard"},[m.value?(u(),$(r(U),{key:0,class:"w-5 h-5 text-green-500"})):(u(),$(r(j),{key:1,class:"w-5 h-5"}))])])])]),_:1},8,["show"]),o(G,{show:f.value,title:"Delete API Token",message:`Are you sure you want to delete the token '${(v=n.value)==null?void 0:v.name}'? This action cannot be undone.`,"confirm-text":"Delete",variant:"danger",loading:r(b).processing,onConfirm:V,onCancel:F},null,8,["show","message","loading"])]}),_:1})],64))}};export{be as default};
