import{c,r as S,w as ee,o as n,i as l,g as s,F as x,j as D,t as f,m as w,n as I,l as O,A as F,p as te}from"./app-B4kXJm1R.js";const ae={class:"space-y-4"},se={class:"flex flex-col sm:flex-row justify-between gap-4"},re={class:"flex items-center gap-2"},oe=["value"],ne=["value"],le={class:"relative"},de=["value"],ie={class:"overflow-x-auto rounded-lg border border-secondary-200 dark:border-secondary-700"},ce={class:"w-full text-sm"},ue={class:"bg-secondary-50 border-b- dark:bg-secondary-800"},ve={class:"border-b border-secondary-200 dark:border-secondary-700"},ye={key:0,class:"px-4 py-3 w-4"},pe=["checked","indeterminate"],fe=["onClick"],he={class:"flex items-center gap-2"},ge={key:0,class:"text-primary"},me={key:0,class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},be={key:1,class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},ke={key:1,class:"px-4 py-3 text-left font-medium text-secondary-600 dark:text-secondary-300"},xe={class:"divide-y divide-secondary-200 dark:divide-secondary-700"},we={key:0},_e=["colspan"],Ce={key:0,class:"px-4 py-3"},Se=["checked","onChange"],De=["innerHTML"],Ve={key:1,class:"px-4 py-3"},Pe={class:"flex flex-col sm:flex-row items-center justify-between gap-4"},Ae={class:"text-sm text-secondary-600 dark:text-secondary-400"},Be={key:0},Le={class:"flex items-center gap-1"},Te=["disabled"],$e=["onClick"],je={key:1,class:"px-2 text-secondary-400"},Me=["disabled"],Oe={__name:"DataTable",props:{columns:{type:Array,required:!0},paginatedData:{type:Object,default:()=>({data:[],current_page:1,last_page:1,per_page:10,total:0,from:0,to:0})},data:{type:Array,default:null},perPageOptions:{type:Array,default:()=>[10,25,50,100]},baseUrl:{type:String,default:null},showActions:{type:Boolean,default:!0},actionsLabel:{type:String,default:"Actions"},selectable:{type:Boolean,default:!1},modelValue:{type:Array,default:()=>[]}},emits:["row-click","action","update:modelValue"],setup(v,{expose:R,emit:z}){const o=v,L=z,d=c(()=>o.paginatedData&&o.paginatedData.data),h=S(""),y=S(null),g=S("asc"),m=S(1),b=S(10);let j=null;const H=t=>{h.value=t.target.value,d.value&&(clearTimeout(j),j=setTimeout(()=>{_(1)},300))},U=t=>{const a=[...o.modelValue],e=a.indexOf(t);e===-1?a.push(t):a.splice(e,1),L("update:modelValue",a)},q=t=>{if(t.target.checked){const a=p.value.map(r=>r.id),e=[...new Set([...o.modelValue,...a])];L("update:modelValue",e)}else{const a=p.value.map(r=>r.id),e=o.modelValue.filter(r=>!a.includes(r));L("update:modelValue",e)}},E=c(()=>{if(p.value.length===0)return!1;const t=p.value.map(a=>a.id);return t.length>0&&t.every(a=>o.modelValue.includes(a))}),W=c(()=>{if(p.value.length===0)return!1;const t=p.value.map(e=>e.id),a=t.filter(e=>o.modelValue.includes(e)).length;return a>0&&a<t.length}),_=(t,a=null)=>{if(!d.value)return;const e={page:t,per_page:a||o.paginatedData.per_page};h.value&&(e.search=h.value),y.value&&(e.sort=y.value,e.direction=g.value),te.get(o.baseUrl||window.location.pathname,e,{preserveState:!0,preserveScroll:!0})},V=c(()=>{if(d.value)return o.paginatedData.data;if(!o.data)return[];if(!h.value)return o.data;const t=h.value.toLowerCase();return o.data.filter(a=>o.columns.some(e=>{if(e.searchable===!1)return!1;const r=a[e.key];return r&&String(r).toLowerCase().includes(t)}))}),M=c(()=>d.value||!y.value?V.value:[...V.value].sort((t,a)=>{const e=t[y.value]??"",r=a[y.value]??"";if(typeof e=="number"&&typeof r=="number")return g.value==="asc"?e-r:r-e;const u=String(e).localeCompare(String(r));return g.value==="asc"?u:-u})),G=c(()=>{if(d.value)return M.value;const t=(m.value-1)*b.value;return M.value.slice(t,t+b.value)}),p=c(()=>G.value),k=c(()=>d.value?o.paginatedData.current_page:m.value),J=c(()=>d.value?o.paginatedData.per_page:b.value),N=c(()=>{var t;return d.value?o.paginatedData.total:((t=o.data)==null?void 0:t.length)||0}),P=c(()=>d.value?o.paginatedData.total:V.value.length),T=c(()=>d.value?o.paginatedData.last_page:Math.ceil(P.value/b.value)),K=c(()=>d.value?o.paginatedData.from:(m.value-1)*b.value+1),Q=c(()=>d.value?o.paginatedData.to:Math.min(m.value*b.value,P.value)),X=c(()=>{const t=T.value,a=k.value,e=1,r=[],u=[];if(t<=7){for(let i=1;i<=t;i++)r.push(i);return r}let A=a-e,B=a+e;A<3?(A=1,B=5):B>t-2&&(A=t-4,B=t);for(let i=1;i<=t;i++)(i===1||i===t||i>=A&&i<=B)&&r.push(i);let C=null;for(const i of r)C&&(i-C===2?u.push(C+1):i-C!==1&&u.push("...")),u.push(i),C=i;return u}),Y=t=>{t.sortable!==!1&&(y.value===t.key?g.value=g.value==="asc"?"desc":"asc":(y.value=t.key,g.value="asc"),d.value&&_(1))},$=t=>{t<1||t>T.value||(d.value?_(t):m.value=t)},Z=t=>{d.value?_(1,t):(b.value=t,m.value=1)};return ee(h,()=>{d.value||(m.value=1)}),R({reload:()=>{d.value&&_(k.value)}}),(t,a)=>(n(),l("div",ae,[s("div",se,[s("div",re,[a[3]||(a[3]=s("span",{class:"text-sm text-secondary-600 dark:text-secondary-400"},"Show",-1)),s("select",{value:J.value,onChange:a[0]||(a[0]=e=>Z(Number(e.target.value))),class:"rounded-lg border-gray-300 shadow-sm focus:border-primary-500 focus:ring-primary-500/20 focus:ring-2 dark:bg-secondary-800 dark:border-secondary-600 dark:text-white py-1.5 pl-3 pr-8 text-sm transition-colors duration-200 focus:outline-none"},[(n(!0),l(x,null,D(v.perPageOptions,e=>(n(),l("option",{key:e,value:e},f(e),9,ne))),128))],40,oe),a[4]||(a[4]=s("span",{class:"text-sm text-secondary-600 dark:text-secondary-400"},"entries",-1))]),s("div",le,[s("input",{value:h.value,onInput:H,type:"text",placeholder:"Search...",class:"rounded-lg border-gray-300 shadow-sm focus:border-primary-500 focus:ring-primary-500/20 focus:ring-2 dark:bg-secondary-800 dark:border-secondary-600 dark:text-white pl-10 py-1.5 text-sm w-full sm:w-64 transition-colors duration-200 focus:outline-none"},null,40,de),a[5]||(a[5]=s("svg",{class:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-secondary-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[s("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})],-1))])]),s("div",ie,[s("table",ce,[s("thead",ue,[s("tr",ve,[v.selectable?(n(),l("th",ye,[s("input",{type:"checkbox",checked:E.value,indeterminate:W.value,onChange:q,class:"h-4 w-4 rounded border-secondary-300 text-primary shadow-sm focus:border-primary focus:ring focus:ring-primary/20 focus:ring-opacity-50 transition-colors duration-200 dark:border-secondary-600 dark:bg-secondary-800 dark:checked:bg-primary"},null,40,pe)])):w("",!0),(n(!0),l(x,null,D(v.columns,e=>(n(),l("th",{key:e.key,onClick:r=>Y(e),class:I(["px-4 py-3 text-left font-medium text-secondary-600 dark:text-secondary-300",{"cursor-pointer hover:bg-secondary-100 dark:hover:bg-secondary-700":e.sortable!==!1}])},[s("div",he,[O(f(e.label)+" ",1),e.sortable!==!1&&y.value===e.key?(n(),l("span",ge,[g.value==="asc"?(n(),l("svg",me,[...a[6]||(a[6]=[s("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M5 15l7-7 7 7"},null,-1)])])):(n(),l("svg",be,[...a[7]||(a[7]=[s("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 9l-7 7-7-7"},null,-1)])]))])):w("",!0)])],10,fe))),128)),v.showActions?(n(),l("th",ke,f(v.actionsLabel),1)):w("",!0)])]),s("tbody",xe,[p.value.length===0?(n(),l("tr",we,[s("td",{colspan:v.columns.length+(v.showActions?1:0),class:"px-4 py-8 text-center text-secondary-500 b"}," No data available ",8,_e)])):(n(!0),l(x,{key:1},D(p.value,(e,r)=>(n(),l("tr",{key:e.id||r,class:"bg-white dark:bg-secondary-800 hover:bg-secondary-400 hover:text-white dark:hover:bg-secondary-750"},[v.selectable?(n(),l("td",Ce,[s("input",{type:"checkbox",checked:v.modelValue.includes(e.id),onChange:u=>U(e.id),class:"h-4 w-4 rounded border-secondary-300 text-primary shadow-sm focus:border-primary focus:ring focus:ring-primary/20 focus:ring-opacity-50 transition-colors duration-200 dark:border-secondary-600 dark:bg-secondary-800 dark:checked:bg-primary"},null,40,Se)])):w("",!0),(n(!0),l(x,null,D(v.columns,u=>(n(),l("td",{key:u.key,class:"px-4 py-3"},[F(t.$slots,`cell-${u.key}`,{row:e,value:e[u.key]},()=>[s("span",{innerHTML:e[u.key]},null,8,De)])]))),128)),v.showActions?(n(),l("td",Ve,[F(t.$slots,"actions",{item:e,row:e})])):w("",!0)]))),128))])])]),s("div",Pe,[s("p",Ae,[O(" Showing "+f(K.value)+" to "+f(Q.value)+" of "+f(P.value)+" entries ",1),!d.value&&P.value!==N.value?(n(),l("span",Be," (filtered from "+f(N.value)+" total entries) ",1)):w("",!0)]),s("div",Le,[s("button",{onClick:a[1]||(a[1]=e=>$(k.value-1)),disabled:k.value<=1,class:"px-3 py-1.5 text-sm rounded border border-secondary-300 dark:border-secondary-600 disabled:opacity-50 disabled:cursor-not-allowed hover:bg-secondary-100 dark:hover:bg-secondary-700"}," Previous ",8,Te),(n(!0),l(x,null,D(X.value,(e,r)=>(n(),l(x,{key:r},[e!=="..."?(n(),l("button",{key:0,onClick:u=>$(e),class:I(["px-3 py-1.5 text-sm rounded border",e===k.value?"bg-primary text-white border-primary":"border-secondary-300 dark:border-secondary-600 hover:bg-secondary-100 dark:hover:bg-secondary-700"])},f(e),11,$e)):(n(),l("span",je," ... "))],64))),128)),s("button",{onClick:a[2]||(a[2]=e=>$(k.value+1)),disabled:k.value>=T.value,class:"px-3 py-1.5 text-sm rounded border border-secondary-300 dark:border-secondary-600 disabled:opacity-50 disabled:cursor-not-allowed hover:bg-secondary-100 dark:hover:bg-secondary-700"}," Next ",8,Me)])])]))}};export{Oe as _};
