import{u as q,r as g,o as E,b as N,d as l,e as s,f as $,h as z,g as y,t as C,l as n,m as I,p as D}from"./app-CXYNX7l5.js";import{U as L,_ as P}from"./AdminLayout-BzX5vIWh.js";import{_ as R}from"./Card-B-peCzvN.js";import{_ as U}from"./Button-D7awOZ5r.js";import{_ as S}from"./LinkButton-DRNAIbjn.js";import{_ as G}from"./DataTable-CRkcl87X.js";import{_ as H}from"./Modal-MPsd-BTy.js";import{_ as J}from"./Badge-C9_rjLRC.js";import{q as m,a as O}from"./index-CSEUMRIG.js";import"./UserGroupIcon-B_Y3lvxt.js";import"./ArrowLeftIcon-Bt2tPfv5.js";import"./TrashIcon-DePSIVFn.js";import"./DemoBanner-B-KdNamD.js";import"./XMarkIcon-CPBrcqh9.js";import"./TagIcon-C8r8ihxU.js";import"./keyboard-CcDRV2PE.js";const u=e=>({url:u.url(e),method:"get"});u.definition={methods:["get","head"],url:"/admin/users/data"};u.url=e=>u.definition.url+m(e);u.get=e=>({url:u.url(e),method:"get"});u.head=e=>({url:u.url(e),method:"head"});const i=e=>({url:i.url(e),method:"get"});i.definition={methods:["get","head"],url:"/admin/users"};i.url=e=>i.definition.url+m(e);i.get=e=>({url:i.url(e),method:"get"});i.head=e=>({url:i.url(e),method:"head"});const d=e=>({url:d.url(e),method:"get"});d.definition={methods:["get","head"],url:"/admin/users/create"};d.url=e=>d.definition.url+m(e);d.get=e=>({url:d.url(e),method:"get"});d.head=e=>({url:d.url(e),method:"head"});const h=e=>({url:h.url(e),method:"post"});h.definition={methods:["post"],url:"/admin/users"};h.url=e=>h.definition.url+m(e);h.post=e=>({url:h.url(e),method:"post"});const a=(e,t)=>({url:a.url(e,t),method:"get"});a.definition={methods:["get","head"],url:"/admin/users/{user}/edit"};a.url=(e,t)=>{(typeof e=="string"||typeof e=="number")&&(e={user:e}),typeof e=="object"&&!Array.isArray(e)&&"id"in e&&(e={user:e.id}),Array.isArray(e)&&(e={user:e[0]}),e=O(e);const p={user:typeof e.user=="object"?e.user.id:e.user};return a.definition.url.replace("{user}",p.user.toString()).replace(/\/+$/,"")+m(t)};a.get=(e,t)=>({url:a.url(e,t),method:"get"});a.head=(e,t)=>({url:a.url(e,t),method:"head"});const f=(e,t)=>({url:f.url(e,t),method:"put"});f.definition={methods:["put","patch"],url:"/admin/users/{user}"};f.url=(e,t)=>{(typeof e=="string"||typeof e=="number")&&(e={user:e}),typeof e=="object"&&!Array.isArray(e)&&"id"in e&&(e={user:e.id}),Array.isArray(e)&&(e={user:e[0]}),e=O(e);const p={user:typeof e.user=="object"?e.user.id:e.user};return f.definition.url.replace("{user}",p.user.toString()).replace(/\/+$/,"")+m(t)};f.put=(e,t)=>({url:f.url(e,t),method:"put"});f.patch=(e,t)=>({url:f.url(e,t),method:"patch"});const b=(e,t)=>({url:b.url(e,t),method:"delete"});b.definition={methods:["delete"],url:"/admin/users/{user}"};b.url=(e,t)=>{(typeof e=="string"||typeof e=="number")&&(e={user:e}),typeof e=="object"&&!Array.isArray(e)&&"id"in e&&(e={user:e.id}),Array.isArray(e)&&(e={user:e[0]}),e=O(e);const p={user:typeof e.user=="object"?e.user.id:e.user};return b.definition.url.replace("{user}",p.user.toString()).replace(/\/+$/,"")+m(t)};b.delete=(e,t)=>({url:b.url(e,t),method:"delete"});const c=e=>({url:c.url(e),method:"get"});c.definition={methods:["get","head"],url:"/admin/users/export"};c.url=e=>c.definition.url+m(e);c.get=e=>({url:c.url(e),method:"get"});c.head=e=>({url:c.url(e),method:"head"});const v=e=>({url:v.url(e),method:"post"});v.definition={methods:["post"],url:"/admin/users/bulk-destroy"};v.url=e=>v.definition.url+m(e);v.post=e=>({url:v.url(e),method:"post"});const _=(e,t)=>({url:_.url(e,t),method:"post"});_.definition={methods:["post"],url:"/admin/users/{user}/ban"};_.url=(e,t)=>{(typeof e=="string"||typeof e=="number")&&(e={user:e}),typeof e=="object"&&!Array.isArray(e)&&"id"in e&&(e={user:e.id}),Array.isArray(e)&&(e={user:e[0]}),e=O(e);const p={user:typeof e.user=="object"?e.user.id:e.user};return _.definition.url.replace("{user}",p.user.toString()).replace(/\/+$/,"")+m(t)};_.post=(e,t)=>({url:_.url(e,t),method:"post"});const w={data:Object.assign(u,u),index:Object.assign(i,i),create:Object.assign(d,d),store:Object.assign(h,h),edit:Object.assign(a,a),update:Object.assign(f,f),destroy:Object.assign(b,b),export:Object.assign(c,c),bulk_destroy:Object.assign(v,v),ban:Object.assign(_,_)},K={class:"w-full flex items-center justify-between"},Q={class:"font-semibold"},W={class:"flex gap-2"},X={class:"relative inline-flex items-center cursor-pointer"},Y=["checked","onChange"],Z={class:"flex items-center gap-2"},ee={class:"text-secondary-600 dark:text-secondary-300"},ve={__name:"Index",props:{title:{type:String,default:"Users"},paginatedUsers:{type:Object,default:()=>({})}},setup(e){const t=q(),p=[{key:"name",label:"Name",sortable:!0},{key:"email",label:"Email",sortable:!0},{key:"role",label:"Role",sortable:!1},{key:"last_login",label:"Last Login",sortable:!1,searchable:!1},{key:"is_banned",label:"Banned",sortable:!1,searchable:!1},{key:"action",label:"Action",sortable:!1,searchable:!1}],x=g(!1),j=g(null),k=g([]),T=()=>{confirm(`Are you sure you want to delete ${k.value.length} users?`)&&D.post(L.bulkDestroy.url(),{ids:k.value},{preserveScroll:!0,onSuccess:()=>{t.success("Users deleted successfully"),k.value=[]},onError:()=>{t.error("Failed to delete users")}})},V=A=>{j.value=A,x.value=!0},F=()=>{j.value&&D.delete(w.destroy.url({user:j.value.id}),{onSuccess:()=>{t.success("User deleted successfully"),x.value=!1,j.value=null},onError:()=>{t.error("Failed to delete user")}})},M=A=>{const r=A.is_banned?"Unban":"Ban";confirm(`${r} user "${A.name}"?`)&&D.post(w.toggle_ban.url({user:A.id}),{},{onSuccess:()=>{t.success(`User ${r.toLowerCase()}ned successfully`)},onError:()=>{t.error("Failed to update status")}})};return(A,r)=>(E(),N(P,{title:e.title},{default:l(()=>[s($(z),{title:e.title},null,8,["title"]),s(R,null,{header:l(()=>[y("div",K,[y("span",Q,C(e.title)+" List",1),y("div",W,[k.value.length>0?(E(),N(U,{key:0,variant:"danger",onClick:T},{default:l(()=>[n(" Delete ("+C(k.value.length)+") ",1)]),_:1})):I("",!0),s(S,{href:$(L).exportMethod.url(),variant:"outline-primary"},{default:l(()=>[...r[3]||(r[3]=[n(" Export ",-1)])]),_:1},8,["href"]),s(S,{href:$(w).create.url(),variant:"primary"},{default:l(()=>[...r[4]||(r[4]=[n(" Add User ",-1)])]),_:1},8,["href"])])])]),default:l(()=>[s(G,{"paginated-data":e.paginatedUsers,columns:p,selectable:"",selection:k.value,"onUpdate:selection":r[0]||(r[0]=o=>k.value=o)},{"cell-role":l(({value:o})=>[s(J,{variant:"primary"},{default:l(()=>[n(C(o),1)]),_:2},1024)]),"cell-is_banned":l(({row:o,value:B})=>[y("label",X,[y("input",{type:"checkbox",checked:B,onChange:te=>M(o),class:"sr-only peer"},null,40,Y),r[5]||(r[5]=y("div",{class:"w-9 h-5 bg-secondary-200 peer-focus:outline-none peer-focus:ring-2 peer-focus:ring-primary rounded-full peer dark:bg-secondary-700 peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-secondary-300 after:border after:rounded-full after:h-4 after:w-4 after:transition-all dark:border-secondary-600 peer-checked:bg-danger"},null,-1))])]),"cell-action":l(({row:o})=>[y("div",Z,[s(S,{href:$(w).edit.url({user:o.id}),variant:"outline-primary",size:"sm"},{default:l(()=>[...r[6]||(r[6]=[n(" Edit ",-1)])]),_:1},8,["href"]),s(U,{size:"sm",variant:"danger",onClick:B=>V(o)},{default:l(()=>[...r[7]||(r[7]=[n(" Delete ",-1)])]),_:1},8,["onClick"])])]),_:1},8,["paginated-data","selection"])]),_:1}),s(H,{show:x.value,title:"Confirm Delete",onClose:r[2]||(r[2]=o=>x.value=!1)},{footer:l(()=>[s(U,{variant:"outline-secondary",onClick:r[1]||(r[1]=o=>x.value=!1)},{default:l(()=>[...r[10]||(r[10]=[n("Cancel",-1)])]),_:1}),s(U,{variant:"danger",onClick:F},{default:l(()=>[...r[11]||(r[11]=[n("Delete",-1)])]),_:1})]),default:l(()=>{var o;return[y("p",ee,[r[8]||(r[8]=n(" Are you sure you want to delete ",-1)),y("strong",null,C((o=j.value)==null?void 0:o.name),1),r[9]||(r[9]=n("? This action cannot be undone. ",-1))])]}),_:1},8,["show"])]),_:1},8,["title"]))}};export{ve as default};
